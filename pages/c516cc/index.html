<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Jsoup å¿«é€Ÿå…¥é—¨ | JAVA-TUTORIAL</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/java-tutorial/img/favicon.ico">
    <meta name="description" content="â˜• java-tutorial æ˜¯ä¸€ä¸ª Java æ•™ç¨‹ï¼Œæ±‡é›†ä¸€ä¸ªè€å¸æœºåœ¨ Java é¢†åŸŸçš„åå¹´ç§¯ç´¯ã€‚">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/java-tutorial/assets/css/0.styles.9b18bf92.css" as="style"><link rel="preload" href="/java-tutorial/assets/js/app.1905b9e7.js" as="script"><link rel="preload" href="/java-tutorial/assets/js/2.fd3e179e.js" as="script"><link rel="preload" href="/java-tutorial/assets/js/57.e4428de4.js" as="script"><link rel="prefetch" href="/java-tutorial/assets/js/10.4f444ad9.js"><link rel="prefetch" href="/java-tutorial/assets/js/11.bcba717a.js"><link rel="prefetch" href="/java-tutorial/assets/js/12.8fe18c68.js"><link rel="prefetch" href="/java-tutorial/assets/js/13.ac6b35ed.js"><link rel="prefetch" href="/java-tutorial/assets/js/14.d9be7dd1.js"><link rel="prefetch" href="/java-tutorial/assets/js/15.658a6d64.js"><link rel="prefetch" href="/java-tutorial/assets/js/16.0eacd8a6.js"><link rel="prefetch" href="/java-tutorial/assets/js/17.456002b9.js"><link rel="prefetch" href="/java-tutorial/assets/js/18.355372f4.js"><link rel="prefetch" href="/java-tutorial/assets/js/19.ec6f4848.js"><link rel="prefetch" href="/java-tutorial/assets/js/20.f4728706.js"><link rel="prefetch" href="/java-tutorial/assets/js/21.07934a6e.js"><link rel="prefetch" href="/java-tutorial/assets/js/22.04bea09d.js"><link rel="prefetch" href="/java-tutorial/assets/js/23.bded5cf6.js"><link rel="prefetch" href="/java-tutorial/assets/js/24.36e55145.js"><link rel="prefetch" href="/java-tutorial/assets/js/25.af635b06.js"><link rel="prefetch" href="/java-tutorial/assets/js/26.3eb5129e.js"><link rel="prefetch" href="/java-tutorial/assets/js/27.76ca98fe.js"><link rel="prefetch" href="/java-tutorial/assets/js/28.8ccbcac6.js"><link rel="prefetch" href="/java-tutorial/assets/js/29.ef9e7225.js"><link rel="prefetch" href="/java-tutorial/assets/js/3.13829456.js"><link rel="prefetch" href="/java-tutorial/assets/js/30.d9cc6dc8.js"><link rel="prefetch" href="/java-tutorial/assets/js/31.a4970b6b.js"><link rel="prefetch" href="/java-tutorial/assets/js/32.c1e5ef11.js"><link rel="prefetch" href="/java-tutorial/assets/js/33.dc8ab04b.js"><link rel="prefetch" href="/java-tutorial/assets/js/34.27064eb2.js"><link rel="prefetch" href="/java-tutorial/assets/js/35.e2658c44.js"><link rel="prefetch" href="/java-tutorial/assets/js/36.5dfe8359.js"><link rel="prefetch" href="/java-tutorial/assets/js/37.9bed175b.js"><link rel="prefetch" href="/java-tutorial/assets/js/38.442a0821.js"><link rel="prefetch" href="/java-tutorial/assets/js/39.ee700231.js"><link rel="prefetch" href="/java-tutorial/assets/js/4.6d986bfe.js"><link rel="prefetch" href="/java-tutorial/assets/js/40.c70d0291.js"><link rel="prefetch" href="/java-tutorial/assets/js/41.c2c82a49.js"><link rel="prefetch" href="/java-tutorial/assets/js/42.d1251607.js"><link rel="prefetch" href="/java-tutorial/assets/js/43.521ef6e4.js"><link rel="prefetch" href="/java-tutorial/assets/js/44.66b2dcf2.js"><link rel="prefetch" href="/java-tutorial/assets/js/45.c588e7c8.js"><link rel="prefetch" href="/java-tutorial/assets/js/46.a2092b84.js"><link rel="prefetch" href="/java-tutorial/assets/js/47.e1a8c216.js"><link rel="prefetch" href="/java-tutorial/assets/js/48.aeba6e1f.js"><link rel="prefetch" href="/java-tutorial/assets/js/49.3978dfc3.js"><link rel="prefetch" href="/java-tutorial/assets/js/5.dfc39999.js"><link rel="prefetch" href="/java-tutorial/assets/js/50.6d98df1d.js"><link rel="prefetch" href="/java-tutorial/assets/js/51.2bfd5e00.js"><link rel="prefetch" href="/java-tutorial/assets/js/52.62d88abb.js"><link rel="prefetch" href="/java-tutorial/assets/js/53.155f15a2.js"><link rel="prefetch" href="/java-tutorial/assets/js/54.266cf2d7.js"><link rel="prefetch" href="/java-tutorial/assets/js/55.d1ed211f.js"><link rel="prefetch" href="/java-tutorial/assets/js/56.cd84ef92.js"><link rel="prefetch" href="/java-tutorial/assets/js/58.54f14446.js"><link rel="prefetch" href="/java-tutorial/assets/js/59.b528093b.js"><link rel="prefetch" href="/java-tutorial/assets/js/6.39027bda.js"><link rel="prefetch" href="/java-tutorial/assets/js/60.0b2f58d0.js"><link rel="prefetch" href="/java-tutorial/assets/js/61.7ec5c991.js"><link rel="prefetch" href="/java-tutorial/assets/js/62.2241309a.js"><link rel="prefetch" href="/java-tutorial/assets/js/63.ac4e1e0a.js"><link rel="prefetch" href="/java-tutorial/assets/js/64.d106193a.js"><link rel="prefetch" href="/java-tutorial/assets/js/65.b6c04d51.js"><link rel="prefetch" href="/java-tutorial/assets/js/66.36025271.js"><link rel="prefetch" href="/java-tutorial/assets/js/67.c231dad8.js"><link rel="prefetch" href="/java-tutorial/assets/js/68.b1d2c18d.js"><link rel="prefetch" href="/java-tutorial/assets/js/69.c541140a.js"><link rel="prefetch" href="/java-tutorial/assets/js/7.3fbeea1c.js"><link rel="prefetch" href="/java-tutorial/assets/js/70.50e92823.js"><link rel="prefetch" href="/java-tutorial/assets/js/71.cfe6e344.js"><link rel="prefetch" href="/java-tutorial/assets/js/72.82532df7.js"><link rel="prefetch" href="/java-tutorial/assets/js/73.987e4182.js"><link rel="prefetch" href="/java-tutorial/assets/js/74.06ab1615.js"><link rel="prefetch" href="/java-tutorial/assets/js/75.a7709b48.js"><link rel="prefetch" href="/java-tutorial/assets/js/76.d2a08353.js"><link rel="prefetch" href="/java-tutorial/assets/js/77.0141ff0a.js"><link rel="prefetch" href="/java-tutorial/assets/js/78.8d33fcf7.js"><link rel="prefetch" href="/java-tutorial/assets/js/79.132f7978.js"><link rel="prefetch" href="/java-tutorial/assets/js/8.49ad1637.js"><link rel="prefetch" href="/java-tutorial/assets/js/80.be1fa7c9.js"><link rel="prefetch" href="/java-tutorial/assets/js/81.5f384a58.js"><link rel="prefetch" href="/java-tutorial/assets/js/82.ac3a3a26.js"><link rel="prefetch" href="/java-tutorial/assets/js/83.4af5435b.js"><link rel="prefetch" href="/java-tutorial/assets/js/84.bcb557f7.js"><link rel="prefetch" href="/java-tutorial/assets/js/85.501d4ca7.js"><link rel="prefetch" href="/java-tutorial/assets/js/86.facca23f.js"><link rel="prefetch" href="/java-tutorial/assets/js/9.e7534b6c.js">
    <link rel="stylesheet" href="/java-tutorial/assets/css/0.styles.9b18bf92.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/java-tutorial/" class="home-link router-link-active"><img src="https://raw.githubusercontent.com/dunwu/images/dev/common/dunwu-logo.png" alt="JAVA-TUTORIAL" class="logo"> <span class="site-name can-hide">JAVA-TUTORIAL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaEE" class="dropdown-title"><!----> <span class="title" style="display:;">JavaEE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java-tutorial/02.JavaEE/01.JavaWeb/" class="nav-link">JavaWeb</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/02.JavaEE/02.æœåŠ¡å™¨/" class="nav-link">æœåŠ¡å™¨</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Javaè½¯ä»¶" class="dropdown-title"><a href="/java-tutorial/11.è½¯ä»¶/" class="link-title">Javaè½¯ä»¶</a> <span class="title" style="display:none;">Javaè½¯ä»¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java-tutorial/11.è½¯ä»¶/01.æ„å»º/" class="nav-link">Javaæ„å»º</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/11.è½¯ä»¶/02.IDE/" class="nav-link">Java IDE</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/11.è½¯ä»¶/03.ç›‘æ§è¯Šæ–­/" class="nav-link">Javaç›‘æ§è¯Šæ–­</a></li></ul></div></div><div class="nav-item"><a href="/java-tutorial/12.å·¥å…·/" class="nav-link">Javaå·¥å…·</a></div><div class="nav-item"><a href="/java-tutorial/13.æ¡†æ¶/" class="nav-link">Javaæ¡†æ¶</a></div><div class="nav-item"><a href="/java-tutorial/14.ä¸­é—´ä»¶/" class="nav-link">Javaä¸­é—´ä»¶</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">âœ¨ Javaç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/dunwu/java-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaEE" class="dropdown-title"><!----> <span class="title" style="display:;">JavaEE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java-tutorial/02.JavaEE/01.JavaWeb/" class="nav-link">JavaWeb</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/02.JavaEE/02.æœåŠ¡å™¨/" class="nav-link">æœåŠ¡å™¨</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Javaè½¯ä»¶" class="dropdown-title"><a href="/java-tutorial/11.è½¯ä»¶/" class="link-title">Javaè½¯ä»¶</a> <span class="title" style="display:none;">Javaè½¯ä»¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java-tutorial/11.è½¯ä»¶/01.æ„å»º/" class="nav-link">Javaæ„å»º</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/11.è½¯ä»¶/02.IDE/" class="nav-link">Java IDE</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/11.è½¯ä»¶/03.ç›‘æ§è¯Šæ–­/" class="nav-link">Javaç›‘æ§è¯Šæ–­</a></li></ul></div></div><div class="nav-item"><a href="/java-tutorial/12.å·¥å…·/" class="nav-link">Javaå·¥å…·</a></div><div class="nav-item"><a href="/java-tutorial/13.æ¡†æ¶/" class="nav-link">Javaæ¡†æ¶</a></div><div class="nav-item"><a href="/java-tutorial/14.ä¸­é—´ä»¶/" class="nav-link">Javaä¸­é—´ä»¶</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">âœ¨ Javaç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/dunwu/java-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>IO</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-tutorial/pages/a14952/" class="sidebar-link">Java å’Œ JSON åºåˆ—åŒ–</a></li><li><a href="/java-tutorial/pages/95f25b/" class="sidebar-link">Java äºŒè¿›åˆ¶åºåˆ—åŒ–</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaBean</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-tutorial/pages/0d31cd/" class="sidebar-link">Lombok å¿«é€Ÿå…¥é—¨</a></li><li><a href="/java-tutorial/pages/596174/" class="sidebar-link">Dozer å¿«é€Ÿå…¥é—¨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ¨¡æ¿å¼•æ“</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-tutorial/pages/34ec25/" class="sidebar-link">Freemark å¿«é€Ÿå…¥é—¨</a></li><li><a href="/java-tutorial/pages/2263fb/" class="sidebar-link">Thymeleaf å¿«é€Ÿå…¥é—¨</a></li><li><a href="/java-tutorial/pages/7ecb81/" class="sidebar-link">Velocity å¿«é€Ÿå…¥é—¨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æµ‹è¯•</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-tutorial/pages/06533c/" class="sidebar-link">JUnit5 å¿«é€Ÿå…¥é—¨</a></li><li><a href="/java-tutorial/pages/ab18ad/" class="sidebar-link">Mockito å¿«é€Ÿå…¥é—¨</a></li><li><a href="/java-tutorial/pages/d99171/" class="sidebar-link">JMeter å¿«é€Ÿå…¥é—¨</a></li><li><a href="/java-tutorial/pages/747d3e/" class="sidebar-link">JMH å¿«é€Ÿå…¥é—¨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>å…¶ä»–</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-tutorial/pages/337701/" class="sidebar-link">javalib-log</a></li><li><a href="/java-tutorial/pages/14e432/" class="sidebar-link">javalib-util</a></li><li><a href="/java-tutorial/pages/ea4914/" class="sidebar-link">Reflections å¿«é€Ÿå…¥é—¨</a></li><li><a href="/java-tutorial/pages/da3f07/" class="sidebar-link">JavaMail å¿«é€Ÿå…¥é—¨</a></li><li><a href="/java-tutorial/pages/c516cc/" aria-current="page" class="active sidebar-link">Jsoup å¿«é€Ÿå…¥é—¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/java-tutorial/pages/c516cc/#ç®€ä»‹" class="sidebar-link">ç®€ä»‹</a></li><li class="sidebar-sub-header level2"><a href="/java-tutorial/pages/c516cc/#åŠ è½½" class="sidebar-link">åŠ è½½</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c516cc/#ä»-html-å­—ç¬¦ä¸²åŠ è½½ä¸€ä¸ªæ–‡æ¡£" class="sidebar-link">ä» HTML å­—ç¬¦ä¸²åŠ è½½ä¸€ä¸ªæ–‡æ¡£</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c516cc/#è§£æä¸€ä¸ª-body-ç‰‡æ–­" class="sidebar-link">è§£æä¸€ä¸ª body ç‰‡æ–­</a></li><li class="sidebar-sub-header level4"><a href="/java-tutorial/pages/c516cc/#ä¿è¯å®‰å…¨-stay-safe" class="sidebar-link">ä¿è¯å®‰å…¨ Stay safe</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c516cc/#ä»-url-åŠ è½½ä¸€ä¸ªæ–‡æ¡£" class="sidebar-link">ä» URL åŠ è½½ä¸€ä¸ªæ–‡æ¡£</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c516cc/#ä»ä¸€ä¸ªæ–‡ä»¶åŠ è½½ä¸€ä¸ªæ–‡æ¡£" class="sidebar-link">ä»ä¸€ä¸ªæ–‡ä»¶åŠ è½½ä¸€ä¸ªæ–‡æ¡£</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-tutorial/pages/c516cc/#è§£æ" class="sidebar-link">è§£æ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c516cc/#ä½¿ç”¨-dom-æ–¹æ³•æ¥éå†ä¸€ä¸ªæ–‡æ¡£" class="sidebar-link">ä½¿ç”¨ DOM æ–¹æ³•æ¥éå†ä¸€ä¸ªæ–‡æ¡£</a></li><li class="sidebar-sub-header level4"><a href="/java-tutorial/pages/c516cc/#æŸ¥æ‰¾å…ƒç´ " class="sidebar-link">æŸ¥æ‰¾å…ƒç´ </a></li><li class="sidebar-sub-header level4"><a href="/java-tutorial/pages/c516cc/#å…ƒç´ æ•°æ®" class="sidebar-link">å…ƒç´ æ•°æ®</a></li><li class="sidebar-sub-header level4"><a href="/java-tutorial/pages/c516cc/#æ“ä½œ-html-å’Œæ–‡æœ¬" class="sidebar-link">æ“ä½œ HTML å’Œæ–‡æœ¬</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c516cc/#ä½¿ç”¨é€‰æ‹©å™¨è¯­æ³•æ¥æŸ¥æ‰¾å…ƒç´ " class="sidebar-link">ä½¿ç”¨é€‰æ‹©å™¨è¯­æ³•æ¥æŸ¥æ‰¾å…ƒç´ </a></li><li class="sidebar-sub-header level4"><a href="/java-tutorial/pages/c516cc/#selector-é€‰æ‹©å™¨æ¦‚è¿°" class="sidebar-link">Selector é€‰æ‹©å™¨æ¦‚è¿°</a></li><li class="sidebar-sub-header level4"><a href="/java-tutorial/pages/c516cc/#selector-é€‰æ‹©å™¨ç»„åˆä½¿ç”¨" class="sidebar-link">Selector é€‰æ‹©å™¨ç»„åˆä½¿ç”¨</a></li><li class="sidebar-sub-header level4"><a href="/java-tutorial/pages/c516cc/#ä¼ªé€‰æ‹©å™¨-selectors" class="sidebar-link">ä¼ªé€‰æ‹©å™¨ selectors</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c516cc/#ä»å…ƒç´ æŠ½å–å±æ€§-æ–‡æœ¬å’Œ-html" class="sidebar-link">ä»å…ƒç´ æŠ½å–å±æ€§ï¼Œæ–‡æœ¬å’Œ HTML</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c516cc/#å¤„ç†-urls" class="sidebar-link">å¤„ç† URLs</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-tutorial/pages/c516cc/#æ•°æ®ä¿®æ”¹" class="sidebar-link">æ•°æ®ä¿®æ”¹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c516cc/#è®¾ç½®å±æ€§çš„å€¼" class="sidebar-link">è®¾ç½®å±æ€§çš„å€¼</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c516cc/#è®¾ç½®ä¸€ä¸ªå…ƒç´ çš„-html-å†…å®¹" class="sidebar-link">è®¾ç½®ä¸€ä¸ªå…ƒç´ çš„ HTML å†…å®¹</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c516cc/#è®¾ç½®å…ƒç´ çš„æ–‡æœ¬å†…å®¹" class="sidebar-link">è®¾ç½®å…ƒç´ çš„æ–‡æœ¬å†…å®¹</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-tutorial/pages/c516cc/#html-æ¸…ç†" class="sidebar-link">HTML æ¸…ç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c516cc/#æ¶ˆé™¤ä¸å—ä¿¡ä»»çš„-html-æ¥é˜²æ­¢-xss-æ”»å‡»" class="sidebar-link">æ¶ˆé™¤ä¸å—ä¿¡ä»»çš„ HTML (æ¥é˜²æ­¢ XSS æ”»å‡»)</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-tutorial/pages/c516cc/#å‚è€ƒ" class="sidebar-link">å‚è€ƒ</a></li></ul></li><li><a href="/java-tutorial/pages/aa9f61/" class="sidebar-link">Thumbnailator å¿«é€Ÿå…¥é—¨</a></li><li><a href="/java-tutorial/pages/cc8ce5/" class="sidebar-link">ZXing å¿«é€Ÿå…¥é—¨</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/java-tutorial/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/java-tutorial/categories/?category=%E5%B7%A5%E5%85%B7" title="åˆ†ç±»" data-v-06225672>å·¥å…·</a></li><li data-v-06225672><a href="/java-tutorial/categories/?category=%E5%85%B6%E4%BB%96" title="åˆ†ç±»" data-v-06225672>å…¶ä»–</a></li></ul> <div class="info" data-v-06225672><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/dunwu" target="_blank" title="ä½œè€…" class="beLink" data-v-06225672>dunwu</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-02-17</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Jsoup å¿«é€Ÿå…¥é—¨<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="jsoup-å¿«é€Ÿå…¥é—¨"><a href="#jsoup-å¿«é€Ÿå…¥é—¨" class="header-anchor">#</a> Jsoup å¿«é€Ÿå…¥é—¨</h1> <h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="header-anchor">#</a> ç®€ä»‹</h2> <p>jsoup æ˜¯ä¸€æ¬¾ Java çš„ HTML è§£æå™¨ï¼Œå¯ç›´æ¥è§£ææŸä¸ª URL åœ°å€ã€HTML æ–‡æœ¬å†…å®¹ã€‚å®ƒæä¾›äº†ä¸€å¥—éå¸¸çœåŠ›çš„ APIï¼Œå¯é€šè¿‡ DOMï¼ŒCSS ä»¥åŠç±»ä¼¼äº JQuery çš„æ“ä½œæ–¹æ³•æ¥å–å‡ºå’Œæ“ä½œæ•°æ®ã€‚</p> <p>jsoup å·¥ä½œçš„æµç¨‹ä¸»è¦å¦‚ä¸‹ï¼š</p> <ol><li>ä»ä¸€ä¸ª URLï¼Œæ–‡ä»¶æˆ–å­—ç¬¦ä¸²ä¸­è§£æ HTMLï¼Œå¹¶åŠ è½½ä¸ºä¸€ä¸ª <code>Document</code> å¯¹è±¡ã€‚</li> <li>ä½¿ç”¨ DOM æˆ– CSS é€‰æ‹©å™¨æ¥å–å‡ºæ•°æ®ï¼›</li> <li>å¯æ“ä½œ HTML å…ƒç´ ã€å±æ€§ã€æ–‡æœ¬ã€‚</li></ol> <p>jsoup æ˜¯åŸºäº MIT åè®®å‘å¸ƒçš„ï¼Œå¯æ”¾å¿ƒä½¿ç”¨äºå•†ä¸šé¡¹ç›®ã€‚</p> <h2 id="åŠ è½½"><a href="#åŠ è½½" class="header-anchor">#</a> åŠ è½½</h2> <h3 id="ä»-html-å­—ç¬¦ä¸²åŠ è½½ä¸€ä¸ªæ–‡æ¡£"><a href="#ä»-html-å­—ç¬¦ä¸²åŠ è½½ä¸€ä¸ªæ–‡æ¡£" class="header-anchor">#</a> ä» HTML å­—ç¬¦ä¸²åŠ è½½ä¸€ä¸ªæ–‡æ¡£</h3> <p>ä½¿ç”¨é™æ€ <code>Jsoup.parse(String html)</code> æ–¹æ³•æˆ– <code>Jsoup.parse(String html, String baseUri)</code> ç¤ºä¾‹ä»£ç ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> html <span class="token operator">=</span> <span class="token string">&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;First parse&lt;/title&gt;&lt;/head&gt;&quot;</span>
  <span class="token operator">+</span> <span class="token string">&quot;&lt;body&gt;&lt;p&gt;Parsed HTML into a doc.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Document</span> doc <span class="token operator">=</span> <span class="token class-name">Jsoup</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><strong>è¯´æ˜</strong></p> <p><code>parse(String html, String baseUri)</code> è¿™æ–¹æ³•èƒ½å¤Ÿå°†è¾“å…¥çš„ HTML è§£æä¸ºä¸€ä¸ªæ–°çš„æ–‡æ¡£ (Documentï¼‰ï¼Œå‚æ•° baseUri æ˜¯ç”¨æ¥å°†ç›¸å¯¹ URL è½¬æˆç»å¯¹ URLï¼Œå¹¶æŒ‡å®šä»å“ªä¸ªç½‘ç«™è·å–æ–‡æ¡£ã€‚å¦‚è¿™ä¸ªæ–¹æ³•ä¸é€‚ç”¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>parse(String html)</code> æ–¹æ³•æ¥è§£ææˆ HTML å­—ç¬¦ä¸²å¦‚ä¸Šé¢çš„ç¤ºä¾‹ã€‚</p> <p>åªè¦è§£æçš„ä¸æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œå°±èƒ½è¿”å›ä¸€ä¸ªç»“æ„åˆç†çš„æ–‡æ¡£ï¼Œå…¶ä¸­åŒ…å«(è‡³å°‘) ä¸€ä¸ª head å’Œä¸€ä¸ª body å…ƒç´ ã€‚</p> <p>ä¸€æ—¦æ‹¥æœ‰äº†ä¸€ä¸ª Documentï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ Document ä¸­é€‚å½“çš„æ–¹æ³•æˆ–å®ƒçˆ¶ç±» <code>Element</code>å’Œ<code>Node</code>ä¸­çš„æ–¹æ³•æ¥å–å¾—ç›¸å…³æ•°æ®ã€‚</p></blockquote> <h3 id="è§£æä¸€ä¸ª-body-ç‰‡æ–­"><a href="#è§£æä¸€ä¸ª-body-ç‰‡æ–­" class="header-anchor">#</a> è§£æä¸€ä¸ª body ç‰‡æ–­</h3> <p><strong>é—®é¢˜</strong></p> <p>å‡å¦‚ä½ æœ‰ä¸€ä¸ª HTML ç‰‡æ–­ (æ¯”å¦‚. ä¸€ä¸ª <code>div</code> åŒ…å«ä¸€å¯¹ <code>p</code> æ ‡ç­¾; ä¸€ä¸ªä¸å®Œæ•´çš„ HTML æ–‡æ¡£) æƒ³å¯¹å®ƒè¿›è¡Œè§£æã€‚è¿™ä¸ª HTML ç‰‡æ–­å¯ä»¥æ˜¯ç”¨æˆ·æäº¤çš„ä¸€æ¡è¯„è®ºæˆ–åœ¨ä¸€ä¸ª CMS é¡µé¢ä¸­ç¼–è¾‘ body éƒ¨åˆ†ã€‚</p> <p><strong>åŠæ³•</strong></p> <p>ä½¿ç”¨<code>Jsoup.parseBodyFragment(String html)</code>æ–¹æ³•.</p> <div class="language- extra-class"><pre class="language-text"><code>String html = &quot;&lt;div&gt;&lt;p&gt;Lorem ipsum.&lt;/p&gt;&quot;;
Document doc = Jsoup.parseBodyFragment(html);
Element body = doc.body();
</code></pre></div><blockquote><p><strong>è¯´æ˜</strong></p> <p><code>parseBodyFragment</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªç©ºå£³çš„æ–‡æ¡£ï¼Œå¹¶æ’å…¥è§£æè¿‡çš„ HTML åˆ°<code>body</code>å…ƒç´ ä¸­ã€‚å‡å¦‚ä½ ä½¿ç”¨æ­£å¸¸çš„ <code>Jsoup.parse(String html)</code> æ–¹æ³•ï¼Œé€šå¸¸ä½ ä¹Ÿå¯ä»¥å¾—åˆ°ç›¸åŒçš„ç»“æœï¼Œä½†æ˜¯æ˜ç¡®å°†ç”¨æˆ·è¾“å…¥ä½œä¸º body ç‰‡æ®µå¤„ç†ï¼Œä»¥ç¡®ä¿ç”¨æˆ·æ‰€æä¾›çš„ä»»ä½•ç³Ÿç³•çš„ HTML éƒ½å°†è¢«è§£ææˆ body å…ƒç´ ã€‚</p> <p><code>Document.body()</code> æ–¹æ³•èƒ½å¤Ÿå–å¾—æ–‡æ¡£ body å…ƒç´ çš„æ‰€æœ‰å­å…ƒç´ ï¼Œä¸ <code>doc.getElementsByTag(&quot;body&quot;)</code>ç›¸åŒã€‚</p></blockquote> <h4 id="ä¿è¯å®‰å…¨-stay-safe"><a href="#ä¿è¯å®‰å…¨-stay-safe" class="header-anchor">#</a> ä¿è¯å®‰å…¨ Stay safe</h4> <p>å‡å¦‚ä½ å¯ä»¥è®©ç”¨æˆ·è¾“å…¥ HTML å†…å®¹ï¼Œé‚£ä¹ˆè¦å°å¿ƒé¿å…è·¨ç«™è„šæœ¬æ”»å‡»ã€‚åˆ©ç”¨åŸºäº <code>Whitelist</code> çš„æ¸…é™¤å™¨å’Œ <code>clean(String bodyHtml, Whitelist whitelist)</code>æ–¹æ³•æ¥æ¸…é™¤ç”¨æˆ·è¾“å…¥çš„æ¶æ„å†…å®¹ã€‚</p> <h3 id="ä»-url-åŠ è½½ä¸€ä¸ªæ–‡æ¡£"><a href="#ä»-url-åŠ è½½ä¸€ä¸ªæ–‡æ¡£" class="header-anchor">#</a> ä» URL åŠ è½½ä¸€ä¸ªæ–‡æ¡£</h3> <p>ä½¿ç”¨ <code>Jsoup.connect(String url)</code>æ–¹æ³•</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Document</span> doc <span class="token operator">=</span> <span class="token class-name">Jsoup</span><span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;http://example.com/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><strong>è¯´æ˜</strong></p> <p><code>connect(String url)</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Connection</code>, å’Œ <code>get()</code> å–å¾—å’Œè§£æä¸€ä¸ª HTML æ–‡ä»¶ã€‚å¦‚æœä»è¯¥ URL è·å– HTML æ—¶å‘ç”Ÿé”™è¯¯ï¼Œä¾¿ä¼šæŠ›å‡º IOExceptionï¼Œåº”é€‚å½“å¤„ç†ã€‚</p></blockquote> <p><code>Connection</code> æ¥å£è¿˜æä¾›ä¸€ä¸ªæ–¹æ³•é“¾æ¥è§£å†³ç‰¹æ®Šè¯·æ±‚ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Document</span> doc <span class="token operator">=</span> <span class="token class-name">Jsoup</span><span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;http://example.com&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">&quot;query&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Java&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">userAgent</span><span class="token punctuation">(</span><span class="token string">&quot;Mozilla&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">&quot;auth&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;token&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ä»ä¸€ä¸ªæ–‡ä»¶åŠ è½½ä¸€ä¸ªæ–‡æ¡£"><a href="#ä»ä¸€ä¸ªæ–‡ä»¶åŠ è½½ä¸€ä¸ªæ–‡æ¡£" class="header-anchor">#</a> ä»ä¸€ä¸ªæ–‡ä»¶åŠ è½½ä¸€ä¸ªæ–‡æ¡£</h3> <p>å¯ä»¥ä½¿ç”¨é™æ€ <code>Jsoup.parse(File in, String charsetName, String baseUri)</code> æ–¹æ³•</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">File</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/input.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Document</span> doc <span class="token operator">=</span> <span class="token class-name">Jsoup</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> <span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://example.com/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><strong>è¯´æ˜</strong></p> <p><code>parse(File in, String charsetName, String baseUri)</code> è¿™ä¸ªæ–¹æ³•ç”¨æ¥åŠ è½½å’Œè§£æä¸€ä¸ª HTML æ–‡ä»¶ã€‚å¦‚åœ¨åŠ è½½æ–‡ä»¶çš„æ—¶å€™å‘ç”Ÿé”™è¯¯ï¼Œå°†æŠ›å‡º IOExceptionï¼Œåº”ä½œé€‚å½“å¤„ç†ã€‚</p> <p><code>baseUri</code> å‚æ•°ç”¨äºè§£å†³æ–‡ä»¶ä¸­ URLs æ˜¯ç›¸å¯¹è·¯å¾„çš„é—®é¢˜ã€‚å¦‚æœä¸éœ€è¦å¯ä»¥ä¼ å…¥ä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸²ã€‚</p> <p>å¦å¤–è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•<code>parse(File in, String charsetName)</code> ï¼Œå®ƒä½¿ç”¨æ–‡ä»¶çš„è·¯å¾„åšä¸º <code>baseUri</code>ã€‚ è¿™ä¸ªæ–¹æ³•é€‚ç”¨äºå¦‚æœè¢«è§£ææ–‡ä»¶ä½äºç½‘ç«™çš„æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œä¸”ç›¸å…³é“¾æ¥ä¹ŸæŒ‡å‘è¯¥æ–‡ä»¶ç³»ç»Ÿã€‚</p></blockquote> <h2 id="è§£æ"><a href="#è§£æ" class="header-anchor">#</a> è§£æ</h2> <h3 id="ä½¿ç”¨-dom-æ–¹æ³•æ¥éå†ä¸€ä¸ªæ–‡æ¡£"><a href="#ä½¿ç”¨-dom-æ–¹æ³•æ¥éå†ä¸€ä¸ªæ–‡æ¡£" class="header-anchor">#</a> ä½¿ç”¨ DOM æ–¹æ³•æ¥éå†ä¸€ä¸ªæ–‡æ¡£</h3> <p><strong>é—®é¢˜</strong></p> <p>ä½ æœ‰ä¸€ä¸ª HTML æ–‡æ¡£è¦ä»ä¸­æå–æ•°æ®ï¼Œå¹¶äº†è§£è¿™ä¸ª HTML æ–‡æ¡£çš„ç»“æ„ã€‚</p> <p><strong>æ–¹æ³•</strong></p> <p>å°† HTML è§£ææˆä¸€ä¸ª<code>Document</code>ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨ç±»ä¼¼äº DOM çš„æ–¹æ³•è¿›è¡Œæ“ä½œã€‚ç¤ºä¾‹ä»£ç ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">File</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/input.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Document</span> doc <span class="token operator">=</span> <span class="token class-name">Jsoup</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> <span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://example.com/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Element</span> content <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Elements</span> links <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">getElementsByTag</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> link <span class="token operator">:</span> links<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> linkHref <span class="token operator">=</span> link<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;href&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> linkText <span class="token operator">=</span> link<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>è¯´æ˜</strong></p> <p><code>Elements</code> è¿™ä¸ªå¯¹è±¡æä¾›äº†ä¸€ç³»åˆ—ç±»ä¼¼äº DOM çš„æ–¹æ³•æ¥æŸ¥æ‰¾å…ƒç´ ï¼ŒæŠ½å–å¹¶å¤„ç†å…¶ä¸­çš„æ•°æ®ã€‚</p> <p>å…·ä½“å¦‚ä¸‹ï¼š</p> <h4 id="æŸ¥æ‰¾å…ƒç´ "><a href="#æŸ¥æ‰¾å…ƒç´ " class="header-anchor">#</a> æŸ¥æ‰¾å…ƒç´ </h4> <ul><li><code>getElementById(String id)</code></li> <li><code>getElementsByTag(String tag)</code></li> <li><code>getElementsByClass(String className)</code></li> <li><code>getElementsByAttribute(String key)</code> (and related methods)</li> <li>Element siblings: <code>siblingElements()</code>, <code>firstElementSibling()</code>, <code>lastElementSibling()</code>;<code>nextElementSibling()</code>, <code>previousElementSibling()</code></li> <li>Graph: <code>parent()</code>, <code>children()</code>, <code>child(int index)</code></li></ul> <h4 id="å…ƒç´ æ•°æ®"><a href="#å…ƒç´ æ•°æ®" class="header-anchor">#</a> å…ƒç´ æ•°æ®</h4> <ul><li><code>attr(String key)</code>è·å–å±æ€§<code>attr(String key, String value)</code>è®¾ç½®å±æ€§</li> <li><code>attributes()</code>è·å–æ‰€æœ‰å±æ€§</li> <li><code>id()</code>, <code>className()</code> and <code>classNames()</code></li> <li><code>text()</code>è·å–æ–‡æœ¬å†…å®¹<code>text(String value)</code> è®¾ç½®æ–‡æœ¬å†…å®¹</li> <li><code>html()</code>è·å–å…ƒç´ å†… HTML<code>html(String value)</code>è®¾ç½®å…ƒç´ å†…çš„ HTML å†…å®¹</li> <li><code>outerHtml()</code>è·å–å…ƒç´ å¤– HTML å†…å®¹</li> <li><code>data()</code>è·å–æ•°æ®å†…å®¹ï¼ˆä¾‹å¦‚ï¼šscript å’Œ style æ ‡ç­¾)</li> <li><code>tag()</code> and <code>tagName()</code></li></ul> <h4 id="æ“ä½œ-html-å’Œæ–‡æœ¬"><a href="#æ“ä½œ-html-å’Œæ–‡æœ¬" class="header-anchor">#</a> æ“ä½œ HTML å’Œæ–‡æœ¬</h4> <ul><li><code>append(String html)</code>, <code>prepend(String html)</code></li> <li><code>appendText(String text)</code>, <code>prependText(String text)</code></li> <li><code>appendElement(String tagName)</code>, <code>prependElement(String tagName)</code></li> <li><code>html(String value)</code></li></ul> <h3 id="ä½¿ç”¨é€‰æ‹©å™¨è¯­æ³•æ¥æŸ¥æ‰¾å…ƒç´ "><a href="#ä½¿ç”¨é€‰æ‹©å™¨è¯­æ³•æ¥æŸ¥æ‰¾å…ƒç´ " class="header-anchor">#</a> ä½¿ç”¨é€‰æ‹©å™¨è¯­æ³•æ¥æŸ¥æ‰¾å…ƒç´ </h3> <p><strong>é—®é¢˜</strong></p> <p>ä½ æƒ³ä½¿ç”¨ç±»ä¼¼äº CSS æˆ– jQuery çš„è¯­æ³•æ¥æŸ¥æ‰¾å’Œæ“ä½œå…ƒç´ ã€‚</p> <p><strong>æ–¹æ³•</strong></p> <p>å¯ä»¥ä½¿ç”¨<code>Element.select(String selector)</code> å’Œ <code>Elements.select(String selector)</code> æ–¹æ³•å®ç°ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">File</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/input.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Document</span> doc <span class="token operator">=</span> <span class="token class-name">Jsoup</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> <span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://example.com/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Elements</span> links <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;a[href]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å¸¦æœ‰hrefå±æ€§çš„aå…ƒç´ </span>
<span class="token class-name">Elements</span> pngs <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;img[src$=.png]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//æ‰©å±•åä¸º.pngçš„å›¾ç‰‡</span>

<span class="token class-name">Element</span> masthead <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;div.masthead&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//classç­‰äºmastheadçš„divæ ‡ç­¾</span>

<span class="token class-name">Elements</span> resultLinks <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;h3.r &gt; a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//åœ¨h3å…ƒç´ ä¹‹åçš„aå…ƒç´ </span>
</code></pre></div><blockquote><p><strong>è¯´æ˜</strong></p> <p>jsoup elements å¯¹è±¡æ”¯æŒç±»ä¼¼äº<a href="http://www.w3.org/TR/2009/PR-css3-selectors-20091215/" target="_blank" rel="noopener noreferrer">CSS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (æˆ–<a href="http://jquery.com/" target="_blank" rel="noopener noreferrer">jquery<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)çš„é€‰æ‹©å™¨è¯­æ³•ï¼Œæ¥å®ç°éå¸¸å¼ºå¤§å’Œçµæ´»çš„æŸ¥æ‰¾åŠŸèƒ½ã€‚.</p> <p>è¿™ä¸ª<code>select</code> æ–¹æ³•åœ¨<code>Document</code>, <code>Element</code>,æˆ–<code>Elements</code>å¯¹è±¡ä¸­éƒ½å¯ä»¥ä½¿ç”¨ã€‚ä¸”æ˜¯ä¸Šä¸‹æ–‡ç›¸å…³çš„ï¼Œå› æ­¤å¯å®ç°æŒ‡å®šå…ƒç´ çš„è¿‡æ»¤ï¼Œæˆ–è€…é“¾å¼é€‰æ‹©è®¿é—®ã€‚</p> <p>Select æ–¹æ³•å°†è¿”å›ä¸€ä¸ª<code>Elements</code>é›†åˆï¼Œå¹¶æä¾›ä¸€ç»„æ–¹æ³•æ¥æŠ½å–å’Œå¤„ç†ç»“æœã€‚</p></blockquote> <h4 id="selector-é€‰æ‹©å™¨æ¦‚è¿°"><a href="#selector-é€‰æ‹©å™¨æ¦‚è¿°" class="header-anchor">#</a> Selector é€‰æ‹©å™¨æ¦‚è¿°</h4> <ul><li><code>tagname</code>: é€šè¿‡æ ‡ç­¾æŸ¥æ‰¾å…ƒç´ ï¼Œæ¯”å¦‚ï¼š<code>a</code></li> <li><code>ns|tag</code>: é€šè¿‡æ ‡ç­¾åœ¨å‘½åç©ºé—´æŸ¥æ‰¾å…ƒç´ ï¼Œæ¯”å¦‚ï¼šå¯ä»¥ç”¨ <code>fb|name</code> è¯­æ³•æ¥æŸ¥æ‰¾ `` å…ƒç´ </li> <li><code>#id</code>: é€šè¿‡ ID æŸ¥æ‰¾å…ƒç´ ï¼Œæ¯”å¦‚ï¼š<code>#logo</code></li> <li><code>.class</code>: é€šè¿‡ class åç§°æŸ¥æ‰¾å…ƒç´ ï¼Œæ¯”å¦‚ï¼š<code>.masthead</code></li> <li><code>[attribute]</code>: åˆ©ç”¨å±æ€§æŸ¥æ‰¾å…ƒç´ ï¼Œæ¯”å¦‚ï¼š<code>[href]</code></li> <li><code>[^attr]</code>: åˆ©ç”¨å±æ€§åå‰ç¼€æ¥æŸ¥æ‰¾å…ƒç´ ï¼Œæ¯”å¦‚ï¼šå¯ä»¥ç”¨<code>[^data-]</code> æ¥æŸ¥æ‰¾å¸¦æœ‰ HTML5 Dataset å±æ€§çš„å…ƒç´ </li> <li><code>[attr=value]</code>: åˆ©ç”¨å±æ€§å€¼æ¥æŸ¥æ‰¾å…ƒç´ ï¼Œæ¯”å¦‚ï¼š<code>[width=500]</code></li> <li><code>[attr^=value]</code>, <code>[attr$=value]</code>, <code>[attr*=value]</code>: åˆ©ç”¨åŒ¹é…å±æ€§å€¼å¼€å¤´ã€ç»“å°¾æˆ–åŒ…å«å±æ€§å€¼æ¥æŸ¥æ‰¾å…ƒç´ ï¼Œæ¯”å¦‚ï¼š<code>[href*=/path/]</code></li> <li><code>[attr\~=regex]</code>: åˆ©ç”¨å±æ€§å€¼åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼æ¥æŸ¥æ‰¾å…ƒç´ ï¼Œæ¯”å¦‚ï¼š <code>img[src\~=(?i)\.(png|jpe?g)]</code></li> <li><code>*</code>: è¿™ä¸ªç¬¦å·å°†åŒ¹é…æ‰€æœ‰å…ƒç´ </li></ul> <h4 id="selector-é€‰æ‹©å™¨ç»„åˆä½¿ç”¨"><a href="#selector-é€‰æ‹©å™¨ç»„åˆä½¿ç”¨" class="header-anchor">#</a> Selector é€‰æ‹©å™¨ç»„åˆä½¿ç”¨</h4> <ul><li><code>el##id</code>: å…ƒç´ +IDï¼Œæ¯”å¦‚ï¼š <code>div##logo</code></li> <li><code>el.class</code>: å…ƒç´ +classï¼Œæ¯”å¦‚ï¼š <code>div.masthead</code></li> <li><code>el[attr]</code>: å…ƒç´ +classï¼Œæ¯”å¦‚ï¼š <code>a[href]</code></li> <li>ä»»æ„ç»„åˆï¼Œæ¯”å¦‚ï¼š<code>a[href].highlight</code></li> <li><code>ancestor child</code>: æŸ¥æ‰¾æŸä¸ªå…ƒç´ ä¸‹å­å…ƒç´ ï¼Œæ¯”å¦‚ï¼šå¯ä»¥ç”¨<code>.body p</code> æŸ¥æ‰¾åœ¨&quot;body&quot;å…ƒç´ ä¸‹çš„æ‰€æœ‰<code>p</code>å…ƒç´ </li> <li><code>parent &gt; child</code>: æŸ¥æ‰¾æŸä¸ªçˆ¶å…ƒç´ ä¸‹çš„ç›´æ¥å­å…ƒç´ ï¼Œæ¯”å¦‚ï¼šå¯ä»¥ç”¨<code>div.content &gt; p</code> æŸ¥æ‰¾ <code>p</code> å…ƒç´ ï¼Œä¹Ÿå¯ä»¥ç”¨<code>body &gt; *</code> æŸ¥æ‰¾ body æ ‡ç­¾ä¸‹æ‰€æœ‰ç›´æ¥å­å…ƒç´ </li> <li><code>siblingA + siblingB</code>: æŸ¥æ‰¾åœ¨ A å…ƒç´ ä¹‹å‰ç¬¬ä¸€ä¸ªåŒçº§å…ƒç´  Bï¼Œæ¯”å¦‚ï¼š<code>div.head + div</code></li> <li><code>siblingA \~ siblingX</code>: æŸ¥æ‰¾ A å…ƒç´ ä¹‹å‰çš„åŒçº§ X å…ƒç´ ï¼Œæ¯”å¦‚ï¼š<code>h1 \~ p</code></li> <li><code>el, el, el</code>:å¤šä¸ªé€‰æ‹©å™¨ç»„åˆï¼ŒæŸ¥æ‰¾åŒ¹é…ä»»ä¸€é€‰æ‹©å™¨çš„å”¯ä¸€å…ƒç´ ï¼Œä¾‹å¦‚ï¼š<code>div.masthead, div.logo</code></li></ul> <h4 id="ä¼ªé€‰æ‹©å™¨-selectors"><a href="#ä¼ªé€‰æ‹©å™¨-selectors" class="header-anchor">#</a> ä¼ªé€‰æ‹©å™¨ selectors</h4> <ul><li><code>:lt(n)</code>: æŸ¥æ‰¾å“ªäº›å…ƒç´ çš„åŒçº§ç´¢å¼•å€¼ï¼ˆå®ƒçš„ä½ç½®åœ¨ DOM æ ‘ä¸­æ˜¯ç›¸å¯¹äºå®ƒçš„çˆ¶èŠ‚ç‚¹ï¼‰å°äº nï¼Œæ¯”å¦‚ï¼š<code>td:lt(3)</code> è¡¨ç¤ºå°äºä¸‰åˆ—çš„å…ƒç´ </li> <li><code>:gt(n)</code>:æŸ¥æ‰¾å“ªäº›å…ƒç´ çš„åŒçº§ç´¢å¼•å€¼å¤§äº<code>n``ï¼Œæ¯”å¦‚</code>ï¼š <code>div p:gt(2)</code>è¡¨ç¤ºå“ªäº› div ä¸­æœ‰åŒ…å« 2 ä¸ªä»¥ä¸Šçš„ p å…ƒç´ </li> <li><code>:eq(n)</code>: æŸ¥æ‰¾å“ªäº›å…ƒç´ çš„åŒçº§ç´¢å¼•å€¼ä¸<code>n</code>ç›¸ç­‰ï¼Œæ¯”å¦‚ï¼š<code>form input:eq(1)</code>è¡¨ç¤ºåŒ…å«ä¸€ä¸ª input æ ‡ç­¾çš„ Form å…ƒç´ </li> <li><code>:has(seletor)</code>: æŸ¥æ‰¾åŒ¹é…é€‰æ‹©å™¨åŒ…å«å…ƒç´ çš„å…ƒç´ ï¼Œæ¯”å¦‚ï¼š<code>div:has(p)</code>è¡¨ç¤ºå“ªäº› div åŒ…å«äº† p å…ƒç´ </li> <li><code>:not(selector)</code>: æŸ¥æ‰¾ä¸é€‰æ‹©å™¨ä¸åŒ¹é…çš„å…ƒç´ ï¼Œæ¯”å¦‚ï¼š <code>div:not(.logo)</code> è¡¨ç¤ºä¸åŒ…å« class=logo å…ƒç´ çš„æ‰€æœ‰ div åˆ—è¡¨</li> <li><code>:contains(text)</code>: æŸ¥æ‰¾åŒ…å«ç»™å®šæ–‡æœ¬çš„å…ƒç´ ï¼Œæœç´¢ä¸åŒºåˆ†å¤§ä¸å†™ï¼Œæ¯”å¦‚ï¼š <code>p:contains(jsoup)</code></li> <li><code>:containsOwn(text)</code>: æŸ¥æ‰¾ç›´æ¥åŒ…å«ç»™å®šæ–‡æœ¬çš„å…ƒç´ </li> <li><code>:matches(regex)</code>: æŸ¥æ‰¾å“ªäº›å…ƒç´ çš„æ–‡æœ¬åŒ¹é…æŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ¯”å¦‚ï¼š<code>div:matches((?i)login)</code></li> <li><code>:matchesOwn(regex)</code>: æŸ¥æ‰¾è‡ªèº«åŒ…å«æ–‡æœ¬åŒ¹é…æŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼çš„å…ƒç´ </li> <li>æ³¨æ„ï¼šä¸Šè¿°ä¼ªé€‰æ‹©å™¨ç´¢å¼•æ˜¯ä» 0 å¼€å§‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¬ä¸€ä¸ªå…ƒç´ ç´¢å¼•å€¼ä¸º 0ï¼Œç¬¬äºŒä¸ªå…ƒç´  index ä¸º 1 ç­‰</li></ul> <p>å¯ä»¥æŸ¥çœ‹<code>Selector</code> API å‚è€ƒæ¥äº†è§£æ›´è¯¦ç»†çš„å†…å®¹</p> <h3 id="ä»å…ƒç´ æŠ½å–å±æ€§-æ–‡æœ¬å’Œ-html"><a href="#ä»å…ƒç´ æŠ½å–å±æ€§-æ–‡æœ¬å’Œ-html" class="header-anchor">#</a> ä»å…ƒç´ æŠ½å–å±æ€§ï¼Œæ–‡æœ¬å’Œ HTML</h3> <p><strong>é—®é¢˜</strong></p> <p>åœ¨è§£æè·å¾—ä¸€ä¸ª Document å®ä¾‹å¯¹è±¡ï¼Œå¹¶æŸ¥æ‰¾åˆ°ä¸€äº›å…ƒç´ ä¹‹åï¼Œä½ å¸Œæœ›å–å¾—åœ¨è¿™äº›å…ƒç´ ä¸­çš„æ•°æ®ã€‚</p> <p><strong>æ–¹æ³•</strong></p> <ul><li>è¦å–å¾—ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨<code>Node.attr(String key)</code> æ–¹æ³•</li> <li>å¯¹äºä¸€ä¸ªå…ƒç´ ä¸­çš„æ–‡æœ¬ï¼Œå¯ä»¥ä½¿ç”¨<code>Element.text()</code>æ–¹æ³•</li> <li>å¯¹äºè¦å–å¾—å…ƒç´ æˆ–å±æ€§ä¸­çš„ HTML å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨<code>Element.html()</code>, æˆ– <code>Node.outerHtml()</code>æ–¹æ³•</li></ul> <p>ç¤ºä¾‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> html <span class="token operator">=</span> <span class="token string">&quot;&lt;p&gt;An &lt;a href='http://example.com/'&gt;&lt;b&gt;example&lt;/b&gt;&lt;/a&gt; link.&lt;/p&gt;&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Document</span> doc <span class="token operator">=</span> <span class="token class-name">Jsoup</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è§£æHTMLå­—ç¬¦ä¸²è¿”å›ä¸€ä¸ªDocumentå®ç°</span>
<span class="token class-name">Element</span> link <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æŸ¥æ‰¾ç¬¬ä¸€ä¸ªaå…ƒç´ </span>

<span class="token class-name">String</span> text <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;An example link&quot;//å–å¾—å­—ç¬¦ä¸²ä¸­çš„æ–‡æœ¬</span>
<span class="token class-name">String</span> linkHref <span class="token operator">=</span> link<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;href&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;http://example.com/&quot;//å–å¾—é“¾æ¥åœ°å€</span>
<span class="token class-name">String</span> linkText <span class="token operator">=</span> link<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;example&quot;&quot;//å–å¾—é“¾æ¥åœ°å€ä¸­çš„æ–‡æœ¬</span>

<span class="token class-name">String</span> linkOuterH <span class="token operator">=</span> link<span class="token punctuation">.</span><span class="token function">outerHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// &quot;&lt;a href=&quot;http://example.com&quot;&gt;&lt;b&gt;example&lt;/b&gt;&lt;/a&gt;&quot;</span>
<span class="token class-name">String</span> linkInnerH <span class="token operator">=</span> link<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;&lt;b&gt;example&lt;/b&gt;&quot;//å–å¾—é“¾æ¥å†…çš„htmlå†…å®¹</span>
</code></pre></div><blockquote><p><strong>è¯´æ˜</strong></p> <p>ä¸Šè¿°æ–¹æ³•æ˜¯å…ƒç´ æ•°æ®è®¿é—®çš„æ ¸å¿ƒåŠæ³•ã€‚æ­¤å¤–è¿˜å…¶å®ƒä¸€äº›æ–¹æ³•å¯ä»¥ä½¿ç”¨ï¼š</p> <ul><li><code>Element.id()</code></li> <li><code>Element.tagName()</code></li> <li><code>Element.className()</code> and <code>Element.hasClass(String className)</code></li></ul> <p>è¿™äº›è®¿é—®å™¨æ–¹æ³•éƒ½æœ‰ç›¸åº”çš„ setter æ–¹æ³•æ¥æ›´æ”¹æ•°æ®</p></blockquote> <p><strong>å‚è§</strong></p> <ul><li><code>Element</code>å’Œ<code>Elements</code>é›†åˆç±»çš„å‚è€ƒæ–‡æ¡£</li> <li><a href="http://www.open-open.com/jsoup/working-with-urls.htm" target="_blank" rel="noopener noreferrer">URLs å¤„ç†<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.open-open.com/jsoup/selector-syntax.htm" target="_blank" rel="noopener noreferrer">ä½¿ç”¨ CSS é€‰æ‹©å™¨è¯­æ³•æ¥æŸ¥æ‰¾å…ƒç´ <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="å¤„ç†-urls"><a href="#å¤„ç†-urls" class="header-anchor">#</a> å¤„ç† URLs</h3> <p><strong>é—®é¢˜</strong></p> <p>ä½ æœ‰ä¸€ä¸ªåŒ…å«ç›¸å¯¹ URLs è·¯å¾„çš„ HTML æ–‡æ¡£ï¼Œéœ€è¦å°†è¿™äº›ç›¸å¯¹è·¯å¾„è½¬æ¢æˆç»å¯¹è·¯å¾„çš„ URLsã€‚</p> <p><strong>æ–¹æ³•</strong></p> <ol><li>åœ¨ä½ è§£ææ–‡æ¡£æ—¶ç¡®ä¿æœ‰æŒ‡å®š<code>base URI</code>ï¼Œç„¶å</li> <li>ä½¿ç”¨ <code>abs:</code> å±æ€§å‰ç¼€æ¥å–å¾—åŒ…å«<code>base URI</code>çš„ç»å¯¹è·¯å¾„ã€‚ä»£ç å¦‚ä¸‹ï¼š</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Document</span> doc <span class="token operator">=</span> <span class="token class-name">Jsoup</span><span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.open-open.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Element</span> link <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> relHref <span class="token operator">=</span> link<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;href&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// == &quot;/&quot;</span>
<span class="token class-name">String</span> absHref <span class="token operator">=</span> link<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;abs:href&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;http://www.open-open.com/&quot;</span>

</code></pre></div><blockquote><p><strong>è¯´æ˜</strong></p> <p>åœ¨ HTML å…ƒç´ ä¸­ï¼ŒURLs ç»å¸¸å†™æˆç›¸å¯¹äºæ–‡æ¡£ä½ç½®çš„ç›¸å¯¹è·¯å¾„ï¼š <code>&lt;a href=&quot;/download&quot;&gt;...&lt;/a&gt;</code>. å½“ä½ ä½¿ç”¨ <code>Node.attr(String key)</code> æ–¹æ³•æ¥å–å¾— a å…ƒç´ çš„ href å±æ€§æ—¶ï¼Œå®ƒå°†ç›´æ¥è¿”å›åœ¨ HTML æºç ä¸­æŒ‡å®šå®šçš„å€¼ã€‚</p> <p>å‡å¦‚ä½ éœ€è¦å–å¾—ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œéœ€è¦åœ¨å±æ€§åå‰åŠ  <code>abs:</code> å‰ç¼€ã€‚è¿™æ ·å°±å¯ä»¥è¿”å›åŒ…å«æ ¹è·¯å¾„çš„ URL åœ°å€<code>attr(&quot;abs:href&quot;)</code></p> <p>å› æ­¤ï¼Œåœ¨è§£æ HTML æ–‡æ¡£æ—¶ï¼Œå®šä¹‰ base URI éå¸¸é‡è¦ã€‚</p> <p>å¦‚æœä½ ä¸æƒ³ä½¿ç”¨<code>abs:</code> å‰ç¼€ï¼Œè¿˜æœ‰ä¸€ä¸ªæ–¹æ³•èƒ½å¤Ÿå®ç°åŒæ ·çš„åŠŸèƒ½ <code>Node.absUrl(String key)</code>ã€‚</p></blockquote> <h2 id="æ•°æ®ä¿®æ”¹"><a href="#æ•°æ®ä¿®æ”¹" class="header-anchor">#</a> æ•°æ®ä¿®æ”¹</h2> <h3 id="è®¾ç½®å±æ€§çš„å€¼"><a href="#è®¾ç½®å±æ€§çš„å€¼" class="header-anchor">#</a> è®¾ç½®å±æ€§çš„å€¼</h3> <p><strong>é—®é¢˜</strong></p> <p>åœ¨ä½ è§£æä¸€ä¸ª <code>Document</code> ä¹‹åå¯èƒ½æƒ³ä¿®æ”¹å…¶ä¸­çš„æŸäº›å±æ€§å€¼ï¼Œç„¶åå†ä¿å­˜åˆ°ç£ç›˜æˆ–éƒ½è¾“å‡ºåˆ°å‰å°é¡µé¢ã€‚</p> <p><strong>æ–¹æ³•</strong></p> <p>å¯ä»¥ä½¿ç”¨å±æ€§è®¾ç½®æ–¹æ³• <code>Element.attr(String key, String value)</code>, å’Œ <code>Elements.attr(String key, String value)</code>.</p> <p>å‡å¦‚ä½ éœ€è¦ä¿®æ”¹ä¸€ä¸ªå…ƒç´ çš„ <code>class</code> å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨ <code>Element.addClass(String className)</code> å’Œ<code>Element.removeClass(String className)</code> æ–¹æ³•ã€‚</p> <p><code>Elements</code> æä¾›äº†æ‰¹é‡æ“ä½œå…ƒç´ å±æ€§å’Œ class çš„æ–¹æ³•ï¼Œæ¯”å¦‚ï¼šè¦ä¸º div ä¸­çš„æ¯ä¸€ä¸ª a å…ƒç´ éƒ½æ·»åŠ ä¸€ä¸ª<code>rel=&quot;nofollow&quot;</code> å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>doc.select(&quot;div.comments a&quot;).attr(&quot;rel&quot;, &quot;nofollow&quot;);

</code></pre></div><blockquote><p><strong>è¯´æ˜</strong></p> <p>ä¸<code>Element</code>ä¸­çš„å…¶å®ƒæ–¹æ³•ä¸€æ ·ï¼Œ<code>attr</code> æ–¹æ³•ä¹Ÿæ˜¯è¿”å›å½“ <code>Element</code> (æˆ–åœ¨ä½¿ç”¨é€‰æ‹©å™¨æ˜¯è¿”å› <code>Elements</code>é›†åˆ)ã€‚è¿™æ ·èƒ½å¤Ÿå¾ˆæ–¹ä¾¿ä½¿ç”¨æ–¹æ³•è¿ç”¨çš„ä¹¦å†™æ–¹å¼ã€‚æ¯”å¦‚ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>doc.select(&quot;div.masthead&quot;).attr(&quot;title&quot;, &quot;jsoup&quot;).addClass(&quot;round-box&quot;);
</code></pre></div></blockquote> <h3 id="è®¾ç½®ä¸€ä¸ªå…ƒç´ çš„-html-å†…å®¹"><a href="#è®¾ç½®ä¸€ä¸ªå…ƒç´ çš„-html-å†…å®¹" class="header-anchor">#</a> è®¾ç½®ä¸€ä¸ªå…ƒç´ çš„ HTML å†…å®¹</h3> <p><strong>é—®é¢˜</strong></p> <p>ä½ éœ€è¦ä¸€ä¸ªå…ƒç´ ä¸­çš„ HTML å†…å®¹</p> <p><strong>æ–¹æ³•</strong></p> <p>å¯ä»¥ä½¿ç”¨<code>Element</code>ä¸­çš„ HTML è®¾ç½®æ–¹æ³•å…·ä½“å¦‚ä¸‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Element</span> div <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;div&gt;&lt;/div&gt;</span>
div<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;p&gt;lorem ipsum&lt;/p&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;div&gt;&lt;p&gt;lorem ipsum&lt;/p&gt;&lt;/div&gt;</span>
div<span class="token punctuation">.</span><span class="token function">prepend</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;p&gt;First&lt;/p&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åœ¨divå‰æ·»åŠ htmlå†…å®¹</span>
div<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;p&gt;Last&lt;/p&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åœ¨divä¹‹åæ·»åŠ htmlå†…å®¹</span>
<span class="token comment">// æ·»å®Œåçš„ç»“æœ: &lt;div&gt;&lt;p&gt;First&lt;/p&gt;&lt;p&gt;lorem ipsum&lt;/p&gt;&lt;p&gt;Last&lt;/p&gt;&lt;/div&gt;</span>

<span class="token class-name">Element</span> span <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;span&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;span&gt;One&lt;/span&gt;</span>
span<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;li&gt;&lt;a href='http://example.com/'&gt;&lt;/a&gt;&lt;/li&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æ·»å®Œåçš„ç»“æœ: &lt;li&gt;&lt;a href=&quot;http://example.com&quot;&gt;&lt;span&gt;One&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;</span>
</code></pre></div><blockquote><p><strong>è¯´æ˜</strong></p> <ul><li><code>Element.html(String html)</code> è¿™ä¸ªæ–¹æ³•å°†å…ˆæ¸…é™¤å…ƒç´ ä¸­çš„ HTML å†…å®¹ï¼Œç„¶åç”¨ä¼ å…¥çš„ HTML ä»£æ›¿ã€‚</li> <li><code>Element.prepend(String first)</code> å’Œ <code>Element.append(String last)</code> æ–¹æ³•ç”¨äºåœ¨åˆ†åˆ«åœ¨å…ƒç´ å†…éƒ¨ HTML çš„å‰é¢å’Œåé¢æ·»åŠ  HTML å†…å®¹</li> <li><code>Element.wrap(String around)</code> å¯¹å…ƒç´ åŒ…è£¹ä¸€ä¸ªå¤–éƒ¨ HTML å†…å®¹ã€‚</li></ul> <p><strong>å‚è§</strong></p> <p>å¯ä»¥æŸ¥çœ‹ API å‚è€ƒæ–‡æ¡£ä¸­ <code>Element.prependElement(String tag)</code>å’Œ<code>Element.appendElement(String tag)</code> æ–¹æ³•æ¥åˆ›å»ºæ–°çš„å…ƒç´ å¹¶ä½œä¸ºæ–‡æ¡£çš„å­å…ƒç´ æ’å…¥å…¶ä¸­ã€‚</p></blockquote> <h3 id="è®¾ç½®å…ƒç´ çš„æ–‡æœ¬å†…å®¹"><a href="#è®¾ç½®å…ƒç´ çš„æ–‡æœ¬å†…å®¹" class="header-anchor">#</a> è®¾ç½®å…ƒç´ çš„æ–‡æœ¬å†…å®¹</h3> <p><strong>é—®é¢˜</strong></p> <p>ä½ éœ€è¦ä¿®æ”¹ä¸€ä¸ª HTML æ–‡æ¡£ä¸­çš„æ–‡æœ¬å†…å®¹</p> <p><strong>æ–¹æ³•</strong></p> <p>å¯ä»¥ä½¿ç”¨<code>Element</code>çš„è®¾ç½®æ–¹æ³•ï¼š:</p> <div class="language- extra-class"><pre class="language-text"><code>Element div = doc.select(&quot;div&quot;).first(); // &lt;div&gt;&lt;/div&gt;
div.text(&quot;five &gt; four&quot;); // &lt;div&gt;five &amp;gt; four&lt;/div&gt;
div.prepend(&quot;First &quot;);
div.append(&quot; Last&quot;);
// now: &lt;div&gt;First five &amp;gt; four Last&lt;/div&gt;
</code></pre></div><blockquote><p><strong>è¯´æ˜</strong></p> <p>æ–‡æœ¬è®¾ç½®æ–¹æ³•ä¸ <a href="http://jsoup.org/cookbook/modifying-data/set-html" target="_blank" rel="noopener noreferrer">HTML setter<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ–¹æ³•ä¸€æ ·ï¼š</p> <ul><li><code>Element.text(String text)</code> å°†æ¸…é™¤ä¸€ä¸ªå…ƒç´ ä¸­çš„å†…éƒ¨ HTML å†…å®¹ï¼Œç„¶åæä¾›çš„æ–‡æœ¬è¿›è¡Œä»£æ›¿</li> <li><code>Element.prepend(String first)</code> å’Œ <code>Element.append(String last)</code> å°†åˆ†åˆ«åœ¨å…ƒç´ çš„å†…éƒ¨ html å‰åæ·»åŠ æ–‡æœ¬èŠ‚ç‚¹ã€‚</li></ul> <p>å¯¹äºä¼ å…¥çš„æ–‡æœ¬å¦‚æœå«æœ‰åƒ <code>&lt;</code>, <code>&gt;</code> ç­‰è¿™æ ·çš„å­—ç¬¦ï¼Œå°†ä»¥æ–‡æœ¬å¤„ç†ï¼Œè€Œé HTMLã€‚</p></blockquote> <h2 id="html-æ¸…ç†"><a href="#html-æ¸…ç†" class="header-anchor">#</a> HTML æ¸…ç†</h2> <h3 id="æ¶ˆé™¤ä¸å—ä¿¡ä»»çš„-html-æ¥é˜²æ­¢-xss-æ”»å‡»"><a href="#æ¶ˆé™¤ä¸å—ä¿¡ä»»çš„-html-æ¥é˜²æ­¢-xss-æ”»å‡»" class="header-anchor">#</a> æ¶ˆé™¤ä¸å—ä¿¡ä»»çš„ HTML (æ¥é˜²æ­¢ XSS æ”»å‡»)</h3> <p><strong>é—®é¢˜</strong></p> <p>åœ¨åšç½‘ç«™çš„æ—¶å€™ï¼Œç»å¸¸ä¼šæä¾›ç”¨æˆ·è¯„è®ºçš„åŠŸèƒ½ã€‚æœ‰äº›ä¸æ€€å¥½æ„çš„ç”¨æˆ·ï¼Œä¼šæä¸€äº›è„šæœ¬åˆ°è¯„è®ºå†…å®¹ä¸­ï¼Œè€Œè¿™äº›è„šæœ¬å¯èƒ½ä¼šç ´åæ•´ä¸ªé¡µé¢çš„è¡Œä¸ºï¼Œæ›´ä¸¥é‡çš„æ˜¯è·å–ä¸€äº›æœºè¦ä¿¡æ¯ï¼Œæ­¤æ—¶éœ€è¦æ¸…ç†è¯¥ HTMLï¼Œä»¥é¿å…è·¨ç«™è„šæœ¬<a href="http://en.wikipedia.org/wiki/Cross-site_scripting" target="_blank" rel="noopener noreferrer">cross-site scripting<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æ”»å‡»ï¼ˆXSSï¼‰ã€‚</p> <p><strong>æ–¹æ³•</strong></p> <p>ä½¿ç”¨ jsoup HTML <code>Cleaner</code> æ–¹æ³•è¿›è¡Œæ¸…é™¤ï¼Œä½†éœ€è¦æŒ‡å®šä¸€ä¸ªå¯é…ç½®çš„ <code>Whitelist</code>ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> unsafe <span class="token operator">=</span>
  <span class="token string">&quot;&lt;p&gt;&lt;a href='http://example.com/' onclick='stealCookies()'&gt;Link&lt;/a&gt;&lt;/p&gt;&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> safe <span class="token operator">=</span> <span class="token class-name">Jsoup</span><span class="token punctuation">.</span><span class="token function">clean</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">,</span> <span class="token class-name">Whitelist</span><span class="token punctuation">.</span><span class="token function">basic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// now: &lt;p&gt;&lt;a href=&quot;http://example.com/&quot; rel=&quot;nofollow&quot;&gt;Link&lt;/a&gt;&lt;/p&gt;</span>
</code></pre></div><p><strong>è¯´æ˜</strong></p> <p>XSS åˆå« CSS (Cross Site Script) ï¼Œè·¨ç«™è„šæœ¬æ”»å‡»ã€‚å®ƒæŒ‡çš„æ˜¯æ¶æ„æ”»å‡»è€…å¾€ Web é¡µé¢é‡Œæ’å…¥æ¶æ„ html ä»£ç ï¼Œå½“ç”¨æˆ·æµè§ˆè¯¥é¡µä¹‹æ—¶ï¼ŒåµŒå…¥å…¶ä¸­ Web é‡Œé¢çš„ html ä»£ç ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ¶æ„æ”»å‡»ç”¨æˆ·çš„ç‰¹æ®Šç›®çš„ã€‚XSS å±äºè¢«åŠ¨å¼çš„æ”»å‡»ï¼Œå› ä¸ºå…¶è¢«åŠ¨ä¸”ä¸å¥½åˆ©ç”¨ï¼Œæ‰€ä»¥è®¸å¤šäººå¸¸å¿½ç•¥å…¶å±å®³æ€§ã€‚æ‰€ä»¥æˆ‘ä»¬ç»å¸¸åªè®©ç”¨æˆ·è¾“å…¥çº¯æ–‡æœ¬çš„å†…å®¹ï¼Œä½†è¿™æ ·ç”¨æˆ·ä½“éªŒå°±æ¯”è¾ƒå·®äº†ã€‚</p> <p>ä¸€ä¸ªæ›´å¥½çš„è§£å†³æ–¹æ³•å°±æ˜¯ä½¿ç”¨ä¸€ä¸ªå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ WYSIWYG å¦‚ <a href="http://ckeditor.com/" target="_blank" rel="noopener noreferrer">CKEditor<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å’Œ <a href="http://tinymce.moxiecode.com/" target="_blank" rel="noopener noreferrer">TinyMCE<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚è¿™äº›å¯ä»¥è¾“å‡º HTML å¹¶èƒ½å¤Ÿè®©ç”¨æˆ·å¯è§†åŒ–ç¼–è¾‘ã€‚è™½ç„¶ä»–ä»¬å¯ä»¥åœ¨å®¢æˆ·ç«¯è¿›è¡Œæ ¡éªŒï¼Œä½†æ˜¯è¿™æ ·è¿˜ä¸å¤Ÿå®‰å…¨ï¼Œéœ€è¦åœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œæ ¡éªŒå¹¶æ¸…é™¤æœ‰å®³çš„ HTML ä»£ç ï¼Œè¿™æ ·æ‰èƒ½ç¡®ä¿è¾“å…¥åˆ°ä½ ç½‘ç«™çš„ HTML æ˜¯å®‰å…¨çš„ã€‚å¦åˆ™ï¼Œæ”»å‡»è€…èƒ½å¤Ÿç»•è¿‡å®¢æˆ·ç«¯çš„ Javascript éªŒè¯ï¼Œå¹¶æ³¨å…¥ä¸å®‰å…¨çš„ HMTL ç›´æ¥è¿›å…¥æ‚¨çš„ç½‘ç«™ã€‚</p> <p>jsoup çš„ whitelist æ¸…ç†å™¨èƒ½å¤Ÿåœ¨æœåŠ¡å™¨ç«¯å¯¹ç”¨æˆ·è¾“å…¥çš„ HTML è¿›è¡Œè¿‡æ»¤ï¼Œåªè¾“å‡ºä¸€äº›å®‰å…¨çš„æ ‡ç­¾å’Œå±æ€§ã€‚</p> <p>jsoup æä¾›äº†ä¸€ç³»åˆ—çš„ <code>Whitelist</code> åŸºæœ¬é…ç½®ï¼Œèƒ½å¤Ÿæ»¡è¶³å¤§å¤šæ•°è¦æ±‚ï¼›ä½†å¦‚æœ‰å¿…è¦ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œä¿®æ”¹ï¼Œä¸è¿‡è¦å°å¿ƒã€‚</p> <p>è¿™ä¸ª cleaner éå¸¸å¥½ç”¨ä¸ä»…å¯ä»¥é¿å… XSS æ”»å‡»ï¼Œè¿˜å¯ä»¥é™åˆ¶ç”¨æˆ·å¯ä»¥è¾“å…¥çš„æ ‡ç­¾èŒƒå›´ã€‚</p> <p><strong>å‚è§</strong></p> <ul><li>å‚é˜…<a href="http://ha.ckers.org/xss.html" target="_blank" rel="noopener noreferrer">XSS cheat sheet<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼Œæœ‰ä¸€ä¸ªä¾‹å­å¯ä»¥äº†è§£ä¸ºä»€ä¹ˆä¸èƒ½ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œè€Œé‡‡ç”¨å®‰å…¨çš„ whitelist parser-based æ¸…ç†å™¨æ‰æ˜¯æ­£ç¡®çš„é€‰æ‹©ã€‚</li> <li>å‚é˜…<code>Cleaner</code> ï¼Œäº†è§£å¦‚ä½•è¿”å›ä¸€ä¸ª <code>Document</code> å¯¹è±¡ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²</li> <li>å‚é˜…<code>Whitelist</code>ï¼Œäº†è§£å¦‚ä½•åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ whitelist</li> <li><a href="http://en.wikipedia.org/wiki/Nofollow" target="_blank" rel="noopener noreferrer">nofollow<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> é“¾æ¥å±æ€§äº†è§£</li></ul> <h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="header-anchor">#</a> å‚è€ƒ</h2> <ul><li><a href="https://github.com/jhy/jsoup" target="_blank" rel="noopener noreferrer">jsoup github æ‰˜ç®¡ä»£ç <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jsoup.org/cookbook/" target="_blank" rel="noopener noreferrer">jsoup Cookbook<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.open-open.com/jsoup/" target="_blank" rel="noopener noreferrer">jsoup Cookbook(ä¸­æ–‡ç‰ˆ)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/code4craft/jsoup-learning" target="_blank" rel="noopener noreferrer">ä¸é”™çš„ jsoup å­¦ä¹ ç¬”è®°<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <div class="page-slot page-slot-bottom">
  <div class="wwads-cn wwads-horizontal pageB" data-id="136" style="width:100%;max-height:80px;min-height:auto;"></div>
  <style>
    .pageB img{width:80px!important;}
    .wwads-horizontal .wwads-text, .wwads-content .wwads-text{line-height:1;}
  </style>
  </div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/java-tutorial/edit/master/docs/12.å·¥å…·/99.å…¶ä»–/05.Jsoup.md" target="_blank" rel="noopener noreferrer">ğŸ“ å¸®åŠ©æ”¹å–„æ­¤é¡µé¢ï¼</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/java-tutorial/tags/?tag=Java" title="æ ‡ç­¾">#Java</a><a href="/java-tutorial/tags/?tag=Html" title="æ ‡ç­¾">#Html</a><a href="/java-tutorial/tags/?tag=Jsoup" title="æ ‡ç­¾">#Jsoup</a></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2022/07/08, 19:00:16</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/java-tutorial/pages/da3f07/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">JavaMail å¿«é€Ÿå…¥é—¨</div></a> <a href="/java-tutorial/pages/aa9f61/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Thumbnailator å¿«é€Ÿå…¥é—¨</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/java-tutorial/pages/da3f07/" class="prev">JavaMail å¿«é€Ÿå…¥é—¨</a></span> <span class="next"><a href="/java-tutorial/pages/aa9f61/">Thumbnailator å¿«é€Ÿå…¥é—¨</a>â†’
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/java-tutorial/archives/" class="iconfont icon-bi">æœ€è¿‘æ›´æ–°</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/java-tutorial/pages/3cbcff/"><div>
            Java ä¸­é—´ä»¶
            <!----></div></a> <span class="date">04-09</span></dt></dl><dl><dd>02</dd> <dt><a href="/java-tutorial/pages/86288e/"><div>
            Tomcat æ•™ç¨‹
            <!----></div></a> <span class="date">02-18</span></dt></dl><dl><dd>03</dd> <dt><a href="/java-tutorial/pages/ca58e7/"><div>
            JavaEE
            <!----></div></a> <span class="date">02-18</span></dt></dl> <dl><dd></dd> <dt><a href="/java-tutorial/archives/" class="more">æ›´å¤šæ–‡ç« &gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:forbreak@163.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/dunwu" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2019-2022
    <span>é’æ‚Ÿï¼ˆdunwuï¼‰ | CC-BY-SA-4.0</span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">Ã—</span> <div>
    <div class="wwads-cn wwads-vertical windowRB" data-id="136" style="max-width:160px;
    min-width: auto;min-height:auto;"></div>
    <style>
      .windowRB{ padding: 0;}
      .windowRB .wwads-img{margin-top: 10px;}
      .windowRB .wwads-content{margin: 0 10px 10px 10px;}
      .custom-html-window-rb .close-but{
        display: none;
      }
    </style>
  </div></div></div></div><div class="global-ui"></div></div>
    <script src="/java-tutorial/assets/js/app.1905b9e7.js" defer></script><script src="/java-tutorial/assets/js/2.fd3e179e.js" defer></script><script src="/java-tutorial/assets/js/57.e4428de4.js" defer></script>
  </body>
</html>
