<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RocketMQ å¿«é€Ÿå…¥é—¨ | JAVA-TUTORIAL</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/java-tutorial/img/favicon.ico">
    <meta name="description" content="â˜• java-tutorial æ˜¯ä¸€ä¸ª Java æ•™ç¨‹ï¼Œæ±‡é›†ä¸€ä¸ªè€å¸æœºåœ¨ Java é¢†åŸŸçš„åå¹´ç§¯ç´¯ã€‚">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/java-tutorial/assets/css/0.styles.9b18bf92.css" as="style"><link rel="preload" href="/java-tutorial/assets/js/app.1905b9e7.js" as="script"><link rel="preload" href="/java-tutorial/assets/js/2.fd3e179e.js" as="script"><link rel="preload" href="/java-tutorial/assets/js/71.cfe6e344.js" as="script"><link rel="prefetch" href="/java-tutorial/assets/js/10.4f444ad9.js"><link rel="prefetch" href="/java-tutorial/assets/js/11.bcba717a.js"><link rel="prefetch" href="/java-tutorial/assets/js/12.8fe18c68.js"><link rel="prefetch" href="/java-tutorial/assets/js/13.ac6b35ed.js"><link rel="prefetch" href="/java-tutorial/assets/js/14.d9be7dd1.js"><link rel="prefetch" href="/java-tutorial/assets/js/15.658a6d64.js"><link rel="prefetch" href="/java-tutorial/assets/js/16.0eacd8a6.js"><link rel="prefetch" href="/java-tutorial/assets/js/17.456002b9.js"><link rel="prefetch" href="/java-tutorial/assets/js/18.355372f4.js"><link rel="prefetch" href="/java-tutorial/assets/js/19.ec6f4848.js"><link rel="prefetch" href="/java-tutorial/assets/js/20.f4728706.js"><link rel="prefetch" href="/java-tutorial/assets/js/21.07934a6e.js"><link rel="prefetch" href="/java-tutorial/assets/js/22.04bea09d.js"><link rel="prefetch" href="/java-tutorial/assets/js/23.bded5cf6.js"><link rel="prefetch" href="/java-tutorial/assets/js/24.36e55145.js"><link rel="prefetch" href="/java-tutorial/assets/js/25.af635b06.js"><link rel="prefetch" href="/java-tutorial/assets/js/26.3eb5129e.js"><link rel="prefetch" href="/java-tutorial/assets/js/27.76ca98fe.js"><link rel="prefetch" href="/java-tutorial/assets/js/28.8ccbcac6.js"><link rel="prefetch" href="/java-tutorial/assets/js/29.ef9e7225.js"><link rel="prefetch" href="/java-tutorial/assets/js/3.13829456.js"><link rel="prefetch" href="/java-tutorial/assets/js/30.d9cc6dc8.js"><link rel="prefetch" href="/java-tutorial/assets/js/31.a4970b6b.js"><link rel="prefetch" href="/java-tutorial/assets/js/32.c1e5ef11.js"><link rel="prefetch" href="/java-tutorial/assets/js/33.dc8ab04b.js"><link rel="prefetch" href="/java-tutorial/assets/js/34.27064eb2.js"><link rel="prefetch" href="/java-tutorial/assets/js/35.e2658c44.js"><link rel="prefetch" href="/java-tutorial/assets/js/36.5dfe8359.js"><link rel="prefetch" href="/java-tutorial/assets/js/37.9bed175b.js"><link rel="prefetch" href="/java-tutorial/assets/js/38.442a0821.js"><link rel="prefetch" href="/java-tutorial/assets/js/39.ee700231.js"><link rel="prefetch" href="/java-tutorial/assets/js/4.6d986bfe.js"><link rel="prefetch" href="/java-tutorial/assets/js/40.c70d0291.js"><link rel="prefetch" href="/java-tutorial/assets/js/41.c2c82a49.js"><link rel="prefetch" href="/java-tutorial/assets/js/42.d1251607.js"><link rel="prefetch" href="/java-tutorial/assets/js/43.521ef6e4.js"><link rel="prefetch" href="/java-tutorial/assets/js/44.66b2dcf2.js"><link rel="prefetch" href="/java-tutorial/assets/js/45.c588e7c8.js"><link rel="prefetch" href="/java-tutorial/assets/js/46.a2092b84.js"><link rel="prefetch" href="/java-tutorial/assets/js/47.e1a8c216.js"><link rel="prefetch" href="/java-tutorial/assets/js/48.aeba6e1f.js"><link rel="prefetch" href="/java-tutorial/assets/js/49.3978dfc3.js"><link rel="prefetch" href="/java-tutorial/assets/js/5.dfc39999.js"><link rel="prefetch" href="/java-tutorial/assets/js/50.6d98df1d.js"><link rel="prefetch" href="/java-tutorial/assets/js/51.2bfd5e00.js"><link rel="prefetch" href="/java-tutorial/assets/js/52.62d88abb.js"><link rel="prefetch" href="/java-tutorial/assets/js/53.155f15a2.js"><link rel="prefetch" href="/java-tutorial/assets/js/54.266cf2d7.js"><link rel="prefetch" href="/java-tutorial/assets/js/55.d1ed211f.js"><link rel="prefetch" href="/java-tutorial/assets/js/56.cd84ef92.js"><link rel="prefetch" href="/java-tutorial/assets/js/57.e4428de4.js"><link rel="prefetch" href="/java-tutorial/assets/js/58.54f14446.js"><link rel="prefetch" href="/java-tutorial/assets/js/59.b528093b.js"><link rel="prefetch" href="/java-tutorial/assets/js/6.39027bda.js"><link rel="prefetch" href="/java-tutorial/assets/js/60.0b2f58d0.js"><link rel="prefetch" href="/java-tutorial/assets/js/61.7ec5c991.js"><link rel="prefetch" href="/java-tutorial/assets/js/62.2241309a.js"><link rel="prefetch" href="/java-tutorial/assets/js/63.ac4e1e0a.js"><link rel="prefetch" href="/java-tutorial/assets/js/64.d106193a.js"><link rel="prefetch" href="/java-tutorial/assets/js/65.b6c04d51.js"><link rel="prefetch" href="/java-tutorial/assets/js/66.36025271.js"><link rel="prefetch" href="/java-tutorial/assets/js/67.c231dad8.js"><link rel="prefetch" href="/java-tutorial/assets/js/68.b1d2c18d.js"><link rel="prefetch" href="/java-tutorial/assets/js/69.c541140a.js"><link rel="prefetch" href="/java-tutorial/assets/js/7.3fbeea1c.js"><link rel="prefetch" href="/java-tutorial/assets/js/70.50e92823.js"><link rel="prefetch" href="/java-tutorial/assets/js/72.82532df7.js"><link rel="prefetch" href="/java-tutorial/assets/js/73.987e4182.js"><link rel="prefetch" href="/java-tutorial/assets/js/74.06ab1615.js"><link rel="prefetch" href="/java-tutorial/assets/js/75.a7709b48.js"><link rel="prefetch" href="/java-tutorial/assets/js/76.d2a08353.js"><link rel="prefetch" href="/java-tutorial/assets/js/77.0141ff0a.js"><link rel="prefetch" href="/java-tutorial/assets/js/78.8d33fcf7.js"><link rel="prefetch" href="/java-tutorial/assets/js/79.132f7978.js"><link rel="prefetch" href="/java-tutorial/assets/js/8.49ad1637.js"><link rel="prefetch" href="/java-tutorial/assets/js/80.be1fa7c9.js"><link rel="prefetch" href="/java-tutorial/assets/js/81.5f384a58.js"><link rel="prefetch" href="/java-tutorial/assets/js/82.ac3a3a26.js"><link rel="prefetch" href="/java-tutorial/assets/js/83.4af5435b.js"><link rel="prefetch" href="/java-tutorial/assets/js/84.bcb557f7.js"><link rel="prefetch" href="/java-tutorial/assets/js/85.501d4ca7.js"><link rel="prefetch" href="/java-tutorial/assets/js/86.facca23f.js"><link rel="prefetch" href="/java-tutorial/assets/js/9.e7534b6c.js">
    <link rel="stylesheet" href="/java-tutorial/assets/css/0.styles.9b18bf92.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/java-tutorial/" class="home-link router-link-active"><img src="https://raw.githubusercontent.com/dunwu/images/dev/common/dunwu-logo.png" alt="JAVA-TUTORIAL" class="logo"> <span class="site-name can-hide">JAVA-TUTORIAL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaEE" class="dropdown-title"><!----> <span class="title" style="display:;">JavaEE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java-tutorial/02.JavaEE/01.JavaWeb/" class="nav-link">JavaWeb</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/02.JavaEE/02.æœåŠ¡å™¨/" class="nav-link">æœåŠ¡å™¨</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Javaè½¯ä»¶" class="dropdown-title"><a href="/java-tutorial/11.è½¯ä»¶/" class="link-title">Javaè½¯ä»¶</a> <span class="title" style="display:none;">Javaè½¯ä»¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java-tutorial/11.è½¯ä»¶/01.æ„å»º/" class="nav-link">Javaæ„å»º</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/11.è½¯ä»¶/02.IDE/" class="nav-link">Java IDE</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/11.è½¯ä»¶/03.ç›‘æ§è¯Šæ–­/" class="nav-link">Javaç›‘æ§è¯Šæ–­</a></li></ul></div></div><div class="nav-item"><a href="/java-tutorial/12.å·¥å…·/" class="nav-link">Javaå·¥å…·</a></div><div class="nav-item"><a href="/java-tutorial/13.æ¡†æ¶/" class="nav-link">Javaæ¡†æ¶</a></div><div class="nav-item"><a href="/java-tutorial/14.ä¸­é—´ä»¶/" class="nav-link">Javaä¸­é—´ä»¶</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">âœ¨ Javaç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/dunwu/java-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaEE" class="dropdown-title"><!----> <span class="title" style="display:;">JavaEE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java-tutorial/02.JavaEE/01.JavaWeb/" class="nav-link">JavaWeb</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/02.JavaEE/02.æœåŠ¡å™¨/" class="nav-link">æœåŠ¡å™¨</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Javaè½¯ä»¶" class="dropdown-title"><a href="/java-tutorial/11.è½¯ä»¶/" class="link-title">Javaè½¯ä»¶</a> <span class="title" style="display:none;">Javaè½¯ä»¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java-tutorial/11.è½¯ä»¶/01.æ„å»º/" class="nav-link">Javaæ„å»º</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/11.è½¯ä»¶/02.IDE/" class="nav-link">Java IDE</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/11.è½¯ä»¶/03.ç›‘æ§è¯Šæ–­/" class="nav-link">Javaç›‘æ§è¯Šæ–­</a></li></ul></div></div><div class="nav-item"><a href="/java-tutorial/12.å·¥å…·/" class="nav-link">Javaå·¥å…·</a></div><div class="nav-item"><a href="/java-tutorial/13.æ¡†æ¶/" class="nav-link">Javaæ¡†æ¶</a></div><div class="nav-item"><a href="/java-tutorial/14.ä¸­é—´ä»¶/" class="nav-link">Javaä¸­é—´ä»¶</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">âœ¨ Javaç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/dunwu/java-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>MQ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-tutorial/pages/5a6cf3/" class="sidebar-link">æ¶ˆæ¯é˜Ÿåˆ—é¢è¯•</a></li><li><a href="/java-tutorial/pages/055069/" class="sidebar-link">æ¶ˆæ¯é˜Ÿåˆ—åŸºæœ¬åŸç†</a></li><li><a href="/java-tutorial/pages/f56a96/" aria-current="page" class="active sidebar-link">RocketMQ å¿«é€Ÿå…¥é—¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/java-tutorial/pages/f56a96/#ç®€ä»‹" class="sidebar-link">ç®€ä»‹</a></li><li class="sidebar-sub-header level2"><a href="/java-tutorial/pages/f56a96/#å®‰è£…" class="sidebar-link">å®‰è£…</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/f56a96/#ç¯å¢ƒè¦æ±‚" class="sidebar-link">ç¯å¢ƒè¦æ±‚</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/f56a96/#ä¸‹è½½è§£å‹" class="sidebar-link">ä¸‹è½½è§£å‹</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/f56a96/#å¯åŠ¨-name-server" class="sidebar-link">å¯åŠ¨ Name Server</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/f56a96/#å¯åŠ¨-broker" class="sidebar-link">å¯åŠ¨ Broker</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/f56a96/#æ”¶å‘æ¶ˆæ¯" class="sidebar-link">æ”¶å‘æ¶ˆæ¯</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/f56a96/#å…³é—­æœåŠ¡å™¨" class="sidebar-link">å…³é—­æœåŠ¡å™¨</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-tutorial/pages/f56a96/#api" class="sidebar-link">API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/f56a96/#producer" class="sidebar-link">Producer</a></li><li class="sidebar-sub-header level4"><a href="/java-tutorial/pages/f56a96/#å¯é çš„åŒæ­¥å‘é€" class="sidebar-link">å¯é çš„åŒæ­¥å‘é€</a></li><li class="sidebar-sub-header level4"><a href="/java-tutorial/pages/f56a96/#å¯é çš„å¼‚æ­¥å‘é€" class="sidebar-link">å¯é çš„å¼‚æ­¥å‘é€</a></li><li class="sidebar-sub-header level4"><a href="/java-tutorial/pages/f56a96/#å•å‘ä¼ è¾“" class="sidebar-link">å•å‘ä¼ è¾“</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/f56a96/#consumer" class="sidebar-link">Consumer</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/f56a96/#faq" class="sidebar-link">FAQ</a></li><li class="sidebar-sub-header level4"><a href="/java-tutorial/pages/f56a96/#connect-to-172-17-0-1-10909-failed" class="sidebar-link">connect to &lt;172.17.0.1:10909&gt; failed</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-tutorial/pages/f56a96/#æ¶æ„" class="sidebar-link">æ¶æ„</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/f56a96/#producer-2" class="sidebar-link">Producer</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/f56a96/#consumer-2" class="sidebar-link">Consumer</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/f56a96/#nameserver" class="sidebar-link">NameServer</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/f56a96/#broker" class="sidebar-link">Broker</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-tutorial/pages/f56a96/#åŸç†" class="sidebar-link">åŸç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/f56a96/#é¡ºåºæ¶ˆæ¯" class="sidebar-link">é¡ºåºæ¶ˆæ¯</a></li><li class="sidebar-sub-header level4"><a href="/java-tutorial/pages/f56a96/#ç¬¬ä¸€ç§æ¨¡å‹" class="sidebar-link">ç¬¬ä¸€ç§æ¨¡å‹</a></li><li class="sidebar-sub-header level4"><a href="/java-tutorial/pages/f56a96/#ç¬¬äºŒç§æ¨¡å‹" class="sidebar-link">ç¬¬äºŒç§æ¨¡å‹</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/f56a96/#æ¶ˆæ¯é‡å¤" class="sidebar-link">æ¶ˆæ¯é‡å¤</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/f56a96/#äº‹åŠ¡æ¶ˆæ¯" class="sidebar-link">äº‹åŠ¡æ¶ˆæ¯</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-tutorial/pages/f56a96/#å‚è€ƒèµ„æ–™" class="sidebar-link">å‚è€ƒèµ„æ–™</a></li></ul></li><li><a href="/java-tutorial/pages/3f7c49/" class="sidebar-link">ActiveMQ å¿«é€Ÿå…¥é—¨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ç¼“å­˜</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-tutorial/pages/eb30d6/" class="sidebar-link">ç¼“å­˜å¤ºå‘½è¿ç¯é—®</a></li><li><a href="/java-tutorial/pages/970fa6/" class="sidebar-link">Java ç¼“å­˜ä¸­é—´ä»¶</a></li><li><a href="/java-tutorial/pages/25a710/" class="sidebar-link">Memcached å¿«é€Ÿå…¥é—¨</a></li><li><a href="/java-tutorial/pages/c4647d/" class="sidebar-link">Ehcache å¿«é€Ÿå…¥é—¨</a></li><li><a href="/java-tutorial/pages/9632fd/" class="sidebar-link">Java è¿›ç¨‹å†…ç¼“å­˜</a></li><li><a href="/java-tutorial/pages/c09100/" class="sidebar-link">http-cache</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æµé‡æ§åˆ¶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-tutorial/pages/f2ebed/" class="sidebar-link">Hystrix å¿«é€Ÿå…¥é—¨</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/java-tutorial/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/java-tutorial/categories/?category=%E4%B8%AD%E9%97%B4%E4%BB%B6" title="åˆ†ç±»" data-v-06225672>ä¸­é—´ä»¶</a></li><li data-v-06225672><a href="/java-tutorial/categories/?category=MQ" title="åˆ†ç±»" data-v-06225672>MQ</a></li></ul> <div class="info" data-v-06225672><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/dunwu" target="_blank" title="ä½œè€…" class="beLink" data-v-06225672>dunwu</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-02-17</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">RocketMQ å¿«é€Ÿå…¥é—¨<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="rocketmq-å¿«é€Ÿå…¥é—¨"><a href="#rocketmq-å¿«é€Ÿå…¥é—¨" class="header-anchor">#</a> RocketMQ å¿«é€Ÿå…¥é—¨</h1> <h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="header-anchor">#</a> ç®€ä»‹</h2> <p>RocketMQ æ˜¯ä¸€æ¬¾å¼€æºçš„åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ï¼ŒåŸºäºé«˜å¯ç”¨åˆ†å¸ƒå¼é›†ç¾¤æŠ€æœ¯ï¼Œæä¾›ä½å»¶æ—¶çš„ã€é«˜å¯é çš„æ¶ˆæ¯å‘å¸ƒä¸è®¢é˜…æœåŠ¡ã€‚</p> <p>RocketMQ è¢«é˜¿é‡Œå·´å·´æèµ ç»™ Apacheï¼Œæˆä¸º Apache çš„å­µåŒ–é¡¹ç›®ã€‚</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javaweb/distributed/mq/rocketmq/rmq-model.png" alt="img"></p> <p>RocketMQ æœ‰ä»¥ä¸‹æ ¸å¿ƒæ¦‚å¿µï¼š</p> <ul><li><strong>Producer</strong> - å°†ä¸šåŠ¡åº”ç”¨ç¨‹åºç³»ç»Ÿç”Ÿæˆçš„æ¶ˆæ¯å‘é€ç»™ä»£ç†ã€‚RocketMQ æä¾›å¤šç§å‘é€èŒƒä¾‹ï¼šåŒæ­¥ï¼Œå¼‚æ­¥å’Œå•å‘ã€‚
<ul><li><strong>Producer Group</strong> - å…·æœ‰ç›¸åŒè§’è‰²çš„ Producer ç»„åˆåœ¨ä¸€èµ·ã€‚å¦‚æœåŸå§‹ Producer åœ¨äº‹åŠ¡ä¹‹åå´©æºƒï¼Œåˆ™ä»£ç†å¯ä»¥è”ç³»åŒä¸€ Producer ç»„çš„ä¸åŒ Producer å®ä¾‹ä»¥æäº¤æˆ–å›æ»šäº‹åŠ¡ã€‚<strong><em>è­¦å‘Šï¼šè€ƒè™‘åˆ°æä¾›çš„ Producer åœ¨å‘é€æ¶ˆæ¯æ–¹é¢è¶³å¤Ÿå¼ºå¤§ï¼Œæ¯ä¸ª Producer ç»„åªå…è®¸ä¸€ä¸ªå®ä¾‹ï¼Œä»¥é¿å…ä¸å¿…è¦çš„ç”Ÿæˆå™¨å®ä¾‹åˆå§‹åŒ–ã€‚</em></strong></li></ul></li> <li><strong>Consumer</strong> - Consumer ä» Broker é‚£é‡Œè·å–æ¶ˆæ¯å¹¶å°†å…¶æä¾›ç»™åº”ç”¨ç¨‹åºã€‚ä»ç”¨æˆ·åº”ç”¨çš„è§’åº¦æ¥çœ‹ï¼Œæä¾›äº†ä¸¤ç§ç±»å‹çš„ Consumerï¼š
<ul><li><strong>PullConsumer</strong> - PullConsumer ç§¯æåœ°ä» Broker é‚£é‡Œè·å–æ¶ˆæ¯ã€‚ä¸€æ—¦æå–äº†æ‰¹é‡æ¶ˆæ¯ï¼Œç”¨æˆ·åº”ç”¨ç¨‹åºå°±ä¼šå¯åŠ¨æ¶ˆè´¹è¿‡ç¨‹ã€‚</li> <li><strong>PushConsumer</strong> - PushConsumer å°è£…æ¶ˆæ¯æå–ï¼Œæ¶ˆè´¹è¿›åº¦å¹¶ç»´æŠ¤å…¶ä»–å†…éƒ¨å·¥ä½œï¼Œä¸ºæœ€ç»ˆç”¨æˆ·ç•™ä¸‹å›è°ƒæ¥å£ï¼Œè¿™ä¸ªå€Ÿå£ä¼šåœ¨æ¶ˆæ¯åˆ°è¾¾æ—¶è¢«æ‰§è¡Œã€‚</li> <li><strong>Consumer Group</strong> - å®Œå…¨ç›¸åŒè§’è‰²çš„ Consumer è¢«ç»„åˆåœ¨ä¸€èµ·å¹¶å‘½åä¸º Consumer Groupã€‚Consumer Group æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ¦‚å¿µï¼Œåœ¨æ¶ˆæ¯æ¶ˆè´¹æ–¹é¢å®ç°è´Ÿè½½å¹³è¡¡å’Œå®¹é”™ç›®æ ‡éå¸¸å®¹æ˜“ã€‚<strong><em>è­¦å‘Šï¼šConsumer Group ä¸­çš„ Consumer å®ä¾‹å¿…é¡»å…·æœ‰å®Œå…¨ç›¸åŒçš„ä¸»é¢˜è®¢é˜…ã€‚</em></strong></li></ul></li> <li><strong>Broker</strong> - Broker æ˜¯ RocketMQ çš„ä¸»è¦ç»„æˆéƒ¨åˆ†ã€‚å®ƒæ¥æ”¶ä» Producer å‘é€çš„æ¶ˆæ¯ï¼Œå­˜å‚¨å®ƒä»¬å¹¶å‡†å¤‡å¤„ç†æ¥è‡ª Consumer çš„æ¶ˆè´¹è¯·æ±‚ã€‚å®ƒè¿˜å­˜å‚¨ä¸æ¶ˆæ¯ç›¸å…³çš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬ Consumer Groupï¼Œæ¶ˆè€—è¿›åº¦åç§»å’Œä¸»é¢˜/é˜Ÿåˆ—ä¿¡æ¯ã€‚</li> <li>Name Server - å……å½“è·¯ç”±ä¿¡æ¯æä¾›è€…ã€‚Producer/Consumer å®¢æˆ·æŸ¥æ‰¾ä¸»é¢˜ä»¥æŸ¥æ‰¾ç›¸åº”çš„ Broker åˆ—è¡¨ã€‚</li> <li><strong>Topic</strong> - æ˜¯ Producer ä¼ é€’æ¶ˆæ¯å’Œ Consumer æå–æ¶ˆæ¯çš„ç±»åˆ«ã€‚</li> <li><strong>Message</strong> - æ˜¯è¦ä¼ é€’çš„ä¿¡æ¯ã€‚æ¶ˆæ¯å¿…é¡»æœ‰ä¸€ä¸ªä¸»é¢˜ï¼Œå¯ä»¥å°†å…¶è§£é‡Šä¸ºæ‚¨è¦å‘é€ç»™çš„é‚®ä»¶åœ°å€ã€‚æ¶ˆæ¯è¿˜å¯ä»¥å…·æœ‰å¯é€‰ Tag å’Œé¢å¤–çš„é”®å€¼å¯¹ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä¸ºæ¶ˆæ¯è®¾ç½®ä¸šåŠ¡å¯†é’¥ï¼Œå¹¶åœ¨ä»£ç†æœåŠ¡å™¨ä¸ŠæŸ¥æ‰¾æ¶ˆæ¯ä»¥è¯Šæ–­å¼€å‘æœŸé—´çš„é—®é¢˜ã€‚
<ul><li><strong>Message Queue</strong> - ä¸»é¢˜è¢«åˆ’åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªå­ä¸»é¢˜â€œæ¶ˆæ¯é˜Ÿåˆ—â€ã€‚</li> <li><strong>Tag</strong> - å³å­ä¸»é¢˜ï¼Œä¸ºç”¨æˆ·æä¾›äº†é¢å¤–çš„çµæ´»æ€§ã€‚å¯¹äº Tagï¼Œæ¥è‡ªåŒä¸€ä¸šåŠ¡æ¨¡å—çš„å…·æœ‰ä¸åŒç›®çš„çš„æ¶ˆæ¯å¯ä»¥å…·æœ‰ç›¸åŒçš„ä¸»é¢˜å’Œä¸åŒçš„ Tagã€‚</li></ul></li></ul> <h2 id="å®‰è£…"><a href="#å®‰è£…" class="header-anchor">#</a> å®‰è£…</h2> <h3 id="ç¯å¢ƒè¦æ±‚"><a href="#ç¯å¢ƒè¦æ±‚" class="header-anchor">#</a> ç¯å¢ƒè¦æ±‚</h3> <ul><li>æ¨è 64 ä½æ“ä½œç³»ç»Ÿï¼šLinux/Unix/Mac</li> <li>64bit JDK 1.8+</li> <li>Maven 3.2.x</li> <li>Git</li></ul> <h3 id="ä¸‹è½½è§£å‹"><a href="#ä¸‹è½½è§£å‹" class="header-anchor">#</a> ä¸‹è½½è§£å‹</h3> <p>è¿›å…¥å®˜æ–¹ä¸‹è½½åœ°å€ï¼š<a href="https://rocketmq.apache.org/dowloading/releases/%EF%BC%8C%E9%80%89%E6%8B%A9%E5%90%88%E9%80%82%E7%89%88%E6%9C%AC" target="_blank" rel="noopener noreferrer">https://rocketmq.apache.org/dowloading/releases/ï¼Œé€‰æ‹©åˆé€‚ç‰ˆæœ¬<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>å»ºè®®é€‰æ‹© binary ç‰ˆæœ¬ã€‚</p> <p>è§£å‹åˆ°æœ¬åœ°ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">unzip</span> rocketmq-all-4.2.0-source-release.zip
<span class="token operator">&gt;</span> <span class="token builtin class-name">cd</span> rocketmq-all-4.2.0/
</code></pre></div><h3 id="å¯åŠ¨-name-server"><a href="#å¯åŠ¨-name-server" class="header-anchor">#</a> å¯åŠ¨ Name Server</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">nohup</span> <span class="token function">sh</span> bin/mqnamesrv <span class="token operator">&amp;</span>
<span class="token operator">&gt;</span> <span class="token function">tail</span> -f ~/logs/rocketmqlogs/namesrv.log
The Name Server boot success<span class="token punctuation">..</span>.
</code></pre></div><h3 id="å¯åŠ¨-broker"><a href="#å¯åŠ¨-broker" class="header-anchor">#</a> å¯åŠ¨ Broker</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">nohup</span> <span class="token function">sh</span> bin/mqbroker -n localhost:9876 -c conf/broker.conf <span class="token operator">&amp;</span>
<span class="token operator">&gt;</span> <span class="token function">tail</span> -f ~/logs/rocketmqlogs/broker.log
The broker<span class="token punctuation">[</span>%s, <span class="token number">172.30</span>.30.233:10911<span class="token punctuation">]</span> boot success<span class="token punctuation">..</span>.
</code></pre></div><h3 id="æ”¶å‘æ¶ˆæ¯"><a href="#æ”¶å‘æ¶ˆæ¯" class="header-anchor">#</a> æ”¶å‘æ¶ˆæ¯</h3> <p>æ‰§è¡Œæ”¶å‘æ¶ˆæ¯æ“ä½œä¹‹å‰ï¼Œä¸è®¸å‘Šè¯‰å®¢æˆ·ç«¯å‘½åæœåŠ¡å™¨çš„ä½ç½®ã€‚åœ¨ RocketMQ ä¸­æœ‰å¤šç§æ–¹æ³•æ¥å®ç°è¿™ä¸ªç›®çš„ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨æœ€ç®€å•çš„æ–¹æ³•â€”â€”è®¾ç½®ç¯å¢ƒå˜é‡ <code>NAMESRV_ADDR</code> ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token builtin class-name">export</span> <span class="token assign-left variable">NAMESRV_ADDR</span><span class="token operator">=</span>localhost:9876
<span class="token operator">&gt;</span> <span class="token function">sh</span> bin/tools.sh org.apache.rocketmq.example.quickstart.Producer
SendResult <span class="token punctuation">[</span>sendStatus<span class="token operator">=</span>SEND_OK, <span class="token assign-left variable">msgId</span><span class="token operator">=</span> <span class="token punctuation">..</span>.

<span class="token operator">&gt;</span> <span class="token function">sh</span> bin/tools.sh org.apache.rocketmq.example.quickstart.Consumer
ConsumeMessageThread_%d Receive New Messages: <span class="token punctuation">[</span>MessageExt<span class="token punctuation">..</span>.
</code></pre></div><h3 id="å…³é—­æœåŠ¡å™¨"><a href="#å…³é—­æœåŠ¡å™¨" class="header-anchor">#</a> å…³é—­æœåŠ¡å™¨</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">sh</span> bin/mqshutdown broker
The mqbroker<span class="token punctuation">(</span><span class="token number">36695</span><span class="token punctuation">)</span> is running<span class="token punctuation">..</span>.
Send <span class="token function">shutdown</span> request to mqbroker<span class="token punctuation">(</span><span class="token number">36695</span><span class="token punctuation">)</span> OK

<span class="token operator">&gt;</span> <span class="token function">sh</span> bin/mqshutdown namesrv
The mqnamesrv<span class="token punctuation">(</span><span class="token number">36664</span><span class="token punctuation">)</span> is running<span class="token punctuation">..</span>.
Send <span class="token function">shutdown</span> request to mqnamesrv<span class="token punctuation">(</span><span class="token number">36664</span><span class="token punctuation">)</span> OK
</code></pre></div><h2 id="api"><a href="#api" class="header-anchor">#</a> API</h2> <p>é¦–å…ˆåœ¨é¡¹ç›®ä¸­å¼•å…¥ maven ä¾èµ–ï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.rocketmq<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>rocketmq-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="producer"><a href="#producer" class="header-anchor">#</a> Producer</h3> <p>Producer åœ¨ RocketMQ ä¸­è´Ÿè´£å‘é€æ¶ˆæ¯ã€‚</p> <p>RocketMQ æœ‰ä¸‰ç§æ¶ˆæ¯å‘é€æ–¹å¼ï¼š</p> <ul><li>å¯é çš„åŒæ­¥å‘é€</li> <li>å¯é çš„å¼‚æ­¥å‘é€</li> <li>å•é¡¹å‘é€</li></ul> <h4 id="å¯é çš„åŒæ­¥å‘é€"><a href="#å¯é çš„åŒæ­¥å‘é€" class="header-anchor">#</a> å¯é çš„åŒæ­¥å‘é€</h4> <p>å¯é çš„åŒæ­¥ä¼ è¾“ç”¨äºå¹¿æ³›çš„åœºæ™¯ï¼Œå¦‚é‡è¦çš„é€šçŸ¥æ¶ˆæ¯ï¼ŒçŸ­ä¿¡é€šçŸ¥ï¼ŒçŸ­ä¿¡è¥é”€ç³»ç»Ÿç­‰ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SyncProducer</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//Instantiate with a producer group name.</span>
        <span class="token class-name">DefaultMQProducer</span> producer <span class="token operator">=</span> <span class="token keyword">new</span>
            <span class="token class-name">DefaultMQProducer</span><span class="token punctuation">(</span><span class="token string">&quot;please_rename_unique_group_name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Launch the instance.</span>
        producer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//Create a message instance, specifying topic, tag and message body.</span>
            <span class="token class-name">Message</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token punctuation">(</span><span class="token string">&quot;TopicTest&quot;</span> <span class="token comment">/* Topic */</span><span class="token punctuation">,</span>
                <span class="token string">&quot;TagA&quot;</span> <span class="token comment">/* Tag */</span><span class="token punctuation">,</span>
                <span class="token punctuation">(</span><span class="token string">&quot;Hello RocketMQ &quot;</span> <span class="token operator">+</span>
                    i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">RemotingHelper</span><span class="token punctuation">.</span>DEFAULT_CHARSET<span class="token punctuation">)</span> <span class="token comment">/* Message body */</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//Call send message to deliver message to one of brokers.</span>
            <span class="token class-name">SendResult</span> sendResult <span class="token operator">=</span> producer<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s%n&quot;</span><span class="token punctuation">,</span> sendResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//Shut down once the producer instance is not longer in use.</span>
        producer<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="å¯é çš„å¼‚æ­¥å‘é€"><a href="#å¯é çš„å¼‚æ­¥å‘é€" class="header-anchor">#</a> å¯é çš„å¼‚æ­¥å‘é€</h4> <p>å¼‚æ­¥ä¼ è¾“é€šå¸¸ç”¨äºå“åº”æ—¶é—´æ•æ„Ÿçš„ä¸šåŠ¡åœºæ™¯ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AsyncProducer</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//Instantiate with a producer group name.</span>
        <span class="token class-name">DefaultMQProducer</span> producer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultMQProducer</span><span class="token punctuation">(</span><span class="token string">&quot;ExampleProducerGroup&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Launch the instance.</span>
        producer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        producer<span class="token punctuation">.</span><span class="token function">setRetryTimesWhenSendAsyncFailed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">final</span> <span class="token keyword">int</span> index <span class="token operator">=</span> i<span class="token punctuation">;</span>
                <span class="token comment">//Create a message instance, specifying topic, tag and message body.</span>
                <span class="token class-name">Message</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token punctuation">(</span><span class="token string">&quot;TopicTest&quot;</span><span class="token punctuation">,</span>
                    <span class="token string">&quot;TagA&quot;</span><span class="token punctuation">,</span>
                    <span class="token string">&quot;OrderID188&quot;</span><span class="token punctuation">,</span>
                    <span class="token string">&quot;Hello world&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">RemotingHelper</span><span class="token punctuation">.</span>DEFAULT_CHARSET<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                producer<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SendCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token annotation punctuation">@Override</span>
                    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token class-name">SendResult</span> sendResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-10d OK %s %n&quot;</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span>
                            sendResult<span class="token punctuation">.</span><span class="token function">getMsgId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token annotation punctuation">@Override</span>
                    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onException</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-10d Exception %s %n&quot;</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//Shut down once the producer instance is not longer in use.</span>
        producer<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="å•å‘ä¼ è¾“"><a href="#å•å‘ä¼ è¾“" class="header-anchor">#</a> å•å‘ä¼ è¾“</h4> <p>å•å‘ä¼ è¾“ç”¨äºéœ€è¦ä¸­ç­‰å¯é æ€§çš„æƒ…å†µï¼Œä¾‹å¦‚æ—¥å¿—æ”¶é›†ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OnewayProducer</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//Instantiate with a producer group name.</span>
        <span class="token class-name">DefaultMQProducer</span> producer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultMQProducer</span><span class="token punctuation">(</span><span class="token string">&quot;ExampleProducerGroup&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Launch the instance.</span>
        producer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//Create a message instance, specifying topic, tag and message body.</span>
            <span class="token class-name">Message</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token punctuation">(</span><span class="token string">&quot;TopicTest&quot;</span> <span class="token comment">/* Topic */</span><span class="token punctuation">,</span>
                <span class="token string">&quot;TagA&quot;</span> <span class="token comment">/* Tag */</span><span class="token punctuation">,</span>
                <span class="token punctuation">(</span><span class="token string">&quot;Hello RocketMQ &quot;</span> <span class="token operator">+</span>
                    i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">RemotingHelper</span><span class="token punctuation">.</span>DEFAULT_CHARSET<span class="token punctuation">)</span> <span class="token comment">/* Message body */</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//Call send message to deliver message to one of brokers.</span>
            producer<span class="token punctuation">.</span><span class="token function">sendOneway</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
        <span class="token comment">//Shut down once the producer instance is not longer in use.</span>
        producer<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="consumer"><a href="#consumer" class="header-anchor">#</a> Consumer</h3> <p>Consumer åœ¨ RocketMQ ä¸­è´Ÿè´£æ¥æ”¶æ¶ˆæ¯ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderedConsumer</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">DefaultMQPushConsumer</span> consumer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultMQPushConsumer</span><span class="token punctuation">(</span><span class="token string">&quot;example_group_name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        consumer<span class="token punctuation">.</span><span class="token function">setNamesrvAddr</span><span class="token punctuation">(</span><span class="token class-name">RocketConfig</span><span class="token punctuation">.</span>HOST<span class="token punctuation">)</span><span class="token punctuation">;</span>

        consumer<span class="token punctuation">.</span><span class="token function">setConsumeFromWhere</span><span class="token punctuation">(</span><span class="token class-name">ConsumeFromWhere</span><span class="token punctuation">.</span>CONSUME_FROM_FIRST_OFFSET<span class="token punctuation">)</span><span class="token punctuation">;</span>

        consumer<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&quot;TopicTest&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;TagA || TagC || TagD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        consumer<span class="token punctuation">.</span><span class="token function">registerMessageListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MessageListenerOrderly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token class-name">AtomicLong</span> consumeTimes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicLong</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">ConsumeOrderlyStatus</span> <span class="token function">consumeMessage</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MessageExt</span><span class="token punctuation">&gt;</span></span> msgs<span class="token punctuation">,</span>
                <span class="token class-name">ConsumeOrderlyContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                context<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; Receive New Messages: &quot;</span> <span class="token operator">+</span> msgs <span class="token operator">+</span> <span class="token string">&quot;%n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>consumeTimes<span class="token punctuation">.</span><span class="token function">incrementAndGet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>consumeTimes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token class-name">ConsumeOrderlyStatus</span><span class="token punctuation">.</span>SUCCESS<span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>consumeTimes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token class-name">ConsumeOrderlyStatus</span><span class="token punctuation">.</span>ROLLBACK<span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>consumeTimes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token class-name">ConsumeOrderlyStatus</span><span class="token punctuation">.</span>COMMIT<span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>consumeTimes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    context<span class="token punctuation">.</span><span class="token function">setSuspendCurrentQueueTimeMillis</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token class-name">ConsumeOrderlyStatus</span><span class="token punctuation">.</span>SUSPEND_CURRENT_QUEUE_A_MOMENT<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> <span class="token class-name">ConsumeOrderlyStatus</span><span class="token punctuation">.</span>SUCCESS<span class="token punctuation">;</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        consumer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Consumer Started.%n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="faq"><a href="#faq" class="header-anchor">#</a> FAQ</h3> <h4 id="connect-to-172-17-0-1-10909-failed"><a href="#connect-to-172-17-0-1-10909-failed" class="header-anchor">#</a> connect to <code>&lt;172.17.0.1:10909&gt;</code> failed</h4> <p>å¯åŠ¨åï¼ŒProducer å®¢æˆ·ç«¯è¿æ¥ RocketMQ æ—¶æŠ¥é”™ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>rocketmq<span class="token punctuation">.</span>remoting<span class="token punctuation">.</span>exception<span class="token punctuation">.</span></span>RemotingConnectException</span><span class="token operator">:</span> connect <span class="token keyword">to</span> <span class="token operator">&lt;</span><span class="token number">172.17</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">10909</span><span class="token operator">&gt;</span> failed
    at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>rocketmq<span class="token punctuation">.</span>remoting<span class="token punctuation">.</span>netty<span class="token punctuation">.</span></span>NettyRemotingClient</span><span class="token punctuation">.</span><span class="token function">invokeSync</span><span class="token punctuation">(</span><span class="token class-name">NettyRemotingClient</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">357</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>rocketmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>MQClientAPIImpl</span><span class="token punctuation">.</span><span class="token function">sendMessageSync</span><span class="token punctuation">(</span><span class="token class-name">MQClientAPIImpl</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">343</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>rocketmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>MQClientAPIImpl</span><span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">MQClientAPIImpl</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">327</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>rocketmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>MQClientAPIImpl</span><span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">MQClientAPIImpl</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">290</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>rocketmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>producer<span class="token punctuation">.</span></span>DefaultMQProducerImpl</span><span class="token punctuation">.</span><span class="token function">sendKernelImpl</span><span class="token punctuation">(</span><span class="token class-name">DefaultMQProducerImpl</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">688</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>rocketmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>producer<span class="token punctuation">.</span></span>DefaultMQProducerImpl</span><span class="token punctuation">.</span><span class="token function">sendSelectImpl</span><span class="token punctuation">(</span><span class="token class-name">DefaultMQProducerImpl</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">901</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>rocketmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>producer<span class="token punctuation">.</span></span>DefaultMQProducerImpl</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">DefaultMQProducerImpl</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">878</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>rocketmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>producer<span class="token punctuation">.</span></span>DefaultMQProducerImpl</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">DefaultMQProducerImpl</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">873</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>rocketmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span>producer<span class="token punctuation">.</span></span>DefaultMQProducer</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">DefaultMQProducer</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">369</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>emrubik<span class="token punctuation">.</span>uc<span class="token punctuation">.</span>mdm<span class="token punctuation">.</span>sync<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span>MdmInit</span><span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">MdmInit</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">62</span><span class="token punctuation">)</span>
    at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>emrubik<span class="token punctuation">.</span>uc<span class="token punctuation">.</span>mdm<span class="token punctuation">.</span>sync<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span>MdmInit</span><span class="token punctuation">.</span><span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">MdmInit</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">2149</span><span class="token punctuation">)</span>
</code></pre></div><p>åŸå› ï¼šRocketMQ éƒ¨ç½²åœ¨è™šæ‹Ÿæœºä¸Šï¼Œå†…ç½‘ ip ä¸º 10.10.30.63ï¼Œè¯¥è™šæ‹Ÿæœºä¸€ä¸ª docker0 ç½‘å¡ï¼Œip ä¸º 172.17.0.1ã€‚RocketMQ broker å¯åŠ¨æ—¶é»˜è®¤ä½¿ç”¨äº† docker0 ç½‘å¡ï¼ŒProducer å®¢æˆ·ç«¯æ— æ³•è¿æ¥ 172.17.0.1ï¼Œé€ æˆä»¥ä¸Šé—®é¢˜ã€‚</p> <p>è§£å†³æ–¹æ¡ˆ</p> <p>ï¼ˆ1ï¼‰å¹²æ‰ docker0 ç½‘å¡æˆ–ä¿®æ”¹ç½‘å¡åç§°</p> <p>ï¼ˆ2ï¼‰åœæ‰ brokerï¼Œä¿®æ”¹ broker é…ç½®æ–‡ä»¶ï¼Œé‡å¯ brokerã€‚</p> <p>ä¿®æ”¹ conf/broker.confï¼Œå¢åŠ ä¸¤è¡Œæ¥æŒ‡å®šå¯åŠ¨ broker çš„ IPï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>namesrvAddr = 10.10.30.63:9876
brokerIP1 = 10.10.30.63
</code></pre></div><p>å¯åŠ¨æ—¶éœ€è¦æŒ‡å®šé…ç½®æ–‡ä»¶</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">nohup</span> <span class="token function">sh</span> bin/mqbroker -n localhost:9876 -c conf/broker.conf <span class="token operator">&amp;</span>
</code></pre></div><h2 id="æ¶æ„"><a href="#æ¶æ„" class="header-anchor">#</a> æ¶æ„</h2> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javaweb/distributed/mq/rocketmq/rmq-basic-arc.png" alt="img"></p> <p>RocketMQ ç”±å››éƒ¨åˆ†ç»„æˆï¼šNameServerã€Brokerã€Producerã€Consumerã€‚å…¶ä¸­ä»»æ„ä¸€ä¸ªç»„æˆéƒ½å¯ä»¥æ°´å¹³æ‰©å±•ä¸ºé›†ç¾¤æ¨¡å¼ï¼Œä»¥é¿å…å•ç‚¹æ•…éšœé—®é¢˜ã€‚</p> <h3 id="producer-2"><a href="#producer-2" class="header-anchor">#</a> Producer</h3> <p>Producers æ”¯æŒåˆ†å¸ƒå¼é›†ç¾¤æ–¹å¼éƒ¨ç½²ã€‚Producer é€šè¿‡ MQ çš„è´Ÿè½½å‡è¡¡æ¨¡å—é€‰æ‹©ç›¸åº”çš„ Broker é›†ç¾¤é˜Ÿåˆ—è¿›è¡Œæ¶ˆæ¯æŠ•é€’ï¼ŒæŠ•é€’çš„è¿‡ç¨‹æ”¯æŒå¿«é€Ÿå¤±è´¥å¹¶ä¸”ä½å»¶è¿Ÿã€‚</p> <h3 id="consumer-2"><a href="#consumer-2" class="header-anchor">#</a> Consumer</h3> <p>Consumer æ”¯æŒåˆ†å¸ƒå¼é›†ç¾¤æ–¹å¼éƒ¨ç½²ã€‚æ”¯æŒä»¥ push æ¨ï¼Œpull æ‹‰ä¸¤ç§æ¨¡å¼å¯¹æ¶ˆæ¯è¿›è¡Œæ¶ˆè´¹ã€‚åŒæ—¶ä¹Ÿæ”¯æŒé›†ç¾¤æ–¹å¼å’Œå¹¿æ’­æ–¹å¼çš„æ¶ˆè´¹ï¼Œå®ƒæä¾›å®æ—¶æ¶ˆæ¯è®¢é˜…æœºåˆ¶ï¼Œå¯ä»¥æ»¡è¶³å¤§å¤šæ•°ç”¨æˆ·çš„éœ€æ±‚ã€‚</p> <h3 id="nameserver"><a href="#nameserver" class="header-anchor">#</a> NameServer</h3> <p>NameServer æ˜¯ä¸€ä¸ª Topic è·¯ç”±æ³¨å†Œä¸­å¿ƒï¼Œå…¶è§’è‰²ç±»ä¼¼ Dubbo ä¸­çš„ zookeeperï¼Œæ”¯æŒ Broker çš„åŠ¨æ€æ³¨å†Œä¸å‘ç°ã€‚ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªåŠŸèƒ½ï¼š</p> <ul><li><strong>Broker ç®¡ç†</strong>ï¼ŒNameServer æ¥å— Broker é›†ç¾¤çš„æ³¨å†Œä¿¡æ¯å¹¶ä¸”ä¿å­˜ä¸‹æ¥ä½œä¸ºè·¯ç”±ä¿¡æ¯çš„åŸºæœ¬æ•°æ®ã€‚ç„¶åæä¾›å¿ƒè·³æ£€æµ‹æœºåˆ¶ï¼Œæ£€æŸ¥ Broker æ˜¯å¦è¿˜å­˜æ´»ï¼›</li> <li><strong>è·¯ç”±ä¿¡æ¯ç®¡ç†</strong>ï¼Œæ¯ä¸ª NameServer å°†ä¿å­˜å…³äº Broker é›†ç¾¤çš„æ•´ä¸ªè·¯ç”±ä¿¡æ¯å’Œç”¨äºå®¢æˆ·ç«¯æŸ¥è¯¢çš„é˜Ÿåˆ—ä¿¡æ¯ã€‚ç„¶å Producer å’Œ Conumser é€šè¿‡ NameServer å°±å¯ä»¥çŸ¥é“æ•´ä¸ª Broker é›†ç¾¤çš„è·¯ç”±ä¿¡æ¯ï¼Œä»è€Œè¿›è¡Œæ¶ˆæ¯çš„æŠ•é€’å’Œæ¶ˆè´¹ã€‚</li></ul> <p>NameServer é€šå¸¸ä¹Ÿæ˜¯é›†ç¾¤çš„æ–¹å¼éƒ¨ç½²ï¼Œå„å®ä¾‹é—´ç›¸äº’ä¸è¿›è¡Œä¿¡æ¯é€šè®¯ã€‚Broker æ˜¯å‘æ¯ä¸€å° NameServer æ³¨å†Œè‡ªå·±çš„è·¯ç”±ä¿¡æ¯ï¼Œæ‰€ä»¥æ¯ä¸€ä¸ª NameServer å®ä¾‹ä¸Šé¢éƒ½ä¿å­˜ä¸€ä»½å®Œæ•´çš„è·¯ç”±ä¿¡æ¯ã€‚å½“æŸä¸ª NameServer å› æŸç§åŸå› ä¸‹çº¿äº†ï¼ŒBroker ä»ç„¶å¯ä»¥å‘å…¶å®ƒ NameServer åŒæ­¥å…¶è·¯ç”±ä¿¡æ¯ï¼ŒProducerã€Consumer ä»ç„¶å¯ä»¥åŠ¨æ€æ„ŸçŸ¥ Broker çš„è·¯ç”±çš„ä¿¡æ¯ã€‚</p> <p>NameServer æ˜¯ä¸€ä¸ªåŠŸèƒ½é½å…¨çš„æœåŠ¡å™¨ï¼Œä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªåŠŸèƒ½ï¼š</p> <ol><li>Broker ç®¡ç† - NameServer æ¥å—æ¥è‡ª Broker é›†ç¾¤çš„æ³¨å†Œï¼Œå¹¶æä¾›å¿ƒè·³æœºåˆ¶æ¥æ£€æŸ¥ Broker èŠ‚ç‚¹æ˜¯å¦å­˜æ´»ã€‚</li> <li>è·¯ç”±ç®¡ç† - æ¯ä¸ª NameServer å°†ä¿å­˜æœ‰å…³ Broker é›†ç¾¤çš„å®Œæ•´è·¯ç”±ä¿¡æ¯å’Œå®¢æˆ·ç«¯æŸ¥è¯¢çš„æŸ¥è¯¢é˜Ÿåˆ—ã€‚</li></ol> <p>RocketMQ å®¢æˆ·ç«¯ï¼ˆProducer/Consumerï¼‰å°†ä» NameServer æŸ¥è¯¢é˜Ÿåˆ—è·¯ç”±ä¿¡æ¯ã€‚</p> <p>å°† NameServer åœ°å€åˆ—è¡¨æä¾›ç»™å®¢æˆ·ç«¯æœ‰å››ç§æ–¹æ³•ï¼š</p> <ol><li>ç¼–ç¨‹æ–¹å¼ - ç±»ä¼¼ï¼š<code>producer.setNamesrvAddr(&quot;ip:port&quot;)</code></li> <li>Java é€‰é¡¹ - ä½¿ç”¨ <code>rocketmq.namesrv.addr</code> å‚æ•°</li> <li>ç¯å¢ƒå˜é‡ - è®¾ç½®ç¯å¢ƒå˜é‡ <code>NAMESRV_ADDR</code></li> <li>HTTP ç«¯ç‚¹</li></ol> <blockquote><p>æ›´è¯¦ç»†ä¿¡æ¯å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="http://rocketmq.apache.org/rocketmq/four-methods-to-feed-name-server-address-list/" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h3 id="broker"><a href="#broker" class="header-anchor">#</a> Broker</h3> <p>Broker ä¸»è¦è´Ÿè´£æ¶ˆæ¯çš„å­˜å‚¨ã€æŠ•é€’å’ŒæŸ¥è¯¢ä»¥åŠæœåŠ¡é«˜å¯ç”¨ä¿è¯ï¼Œä¸ºäº†å®ç°è¿™äº›åŠŸèƒ½ï¼ŒBroker åŒ…å«äº†ä»¥ä¸‹å‡ ä¸ªé‡è¦å­æ¨¡å—ã€‚</p> <p>Broker æœ‰å‡ ä¸ªé‡è¦çš„å­æ¨¡å—ï¼š</p> <ul><li><strong>Remoting Module</strong>ï¼šæ•´ä¸ª Broker çš„å®ä½“ï¼Œè´Ÿè´£å¤„ç†æ¥è‡ª clients ç«¯çš„è¯·æ±‚ã€‚</li> <li><strong>Client Manager</strong>ï¼šè´Ÿè´£ç®¡ç†å®¢æˆ·ç«¯(Producer/Consumer)å’Œç»´æŠ¤ Consumer çš„ Topic è®¢é˜…ä¿¡æ¯ã€‚</li> <li><strong>Store Service</strong>ï¼šæä¾›æ–¹ä¾¿ç®€å•çš„ API æ¥å£å¤„ç†æ¶ˆæ¯å­˜å‚¨åˆ°ç‰©ç†ç¡¬ç›˜å’ŒæŸ¥è¯¢åŠŸèƒ½ã€‚</li> <li><strong>HA Service</strong>ï¼šé«˜å¯ç”¨æœåŠ¡ï¼Œæä¾› Master Broker å’Œ Slave Broker ä¹‹é—´çš„æ•°æ®åŒæ­¥åŠŸèƒ½ã€‚</li> <li><strong>Index Service</strong>ï¼šæ ¹æ®ç‰¹å®šçš„ Message key å¯¹æŠ•é€’åˆ° Broker çš„æ¶ˆæ¯è¿›è¡Œç´¢å¼•æœåŠ¡ï¼Œä»¥æä¾›æ¶ˆæ¯çš„å¿«é€ŸæŸ¥è¯¢ã€‚</li></ul> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javaweb/distributed/mq/rocketmq/rmq-basic-component.png" alt="img"></p> <h2 id="åŸç†"><a href="#åŸç†" class="header-anchor">#</a> åŸç†</h2> <p>åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿä½œä¸ºå®ç°åˆ†å¸ƒå¼ç³»ç»Ÿå¯æ‰©å±•ã€å¯ä¼¸ç¼©æ€§çš„å…³é”®ç»„ä»¶ï¼Œéœ€è¦å…·æœ‰é«˜ååé‡ã€é«˜å¯ç”¨ç­‰ç‰¹ç‚¹ã€‚è€Œè°ˆåˆ°æ¶ˆæ¯ç³»ç»Ÿçš„è®¾è®¡ï¼Œå°±å›é¿ä¸äº†ä¸¤ä¸ªé—®é¢˜ï¼š</p> <ol><li>æ¶ˆæ¯çš„é¡ºåºé—®é¢˜</li> <li>æ¶ˆæ¯çš„é‡å¤é—®é¢˜</li></ol> <h3 id="é¡ºåºæ¶ˆæ¯"><a href="#é¡ºåºæ¶ˆæ¯" class="header-anchor">#</a> é¡ºåºæ¶ˆæ¯</h3> <h4 id="ç¬¬ä¸€ç§æ¨¡å‹"><a href="#ç¬¬ä¸€ç§æ¨¡å‹" class="header-anchor">#</a> ç¬¬ä¸€ç§æ¨¡å‹</h4> <p>å‡å¦‚ç”Ÿäº§è€…äº§ç”Ÿäº† 2 æ¡æ¶ˆæ¯ï¼šM1ã€M2ï¼Œè¦ä¿è¯è¿™ä¸¤æ¡æ¶ˆæ¯çš„é¡ºåºï¼Œåº”è¯¥æ€æ ·åšï¼Ÿä½ è„‘ä¸­æƒ³åˆ°çš„å¯èƒ½æ˜¯è¿™æ ·ï¼š</p> <div align="center"><img src="http://upload-images.jianshu.io/upload_images/3101171-bb5ec534363e2fb4"></div> <p>å‡å®š M1 å‘é€åˆ° S1ï¼ŒM2 å‘é€åˆ° S2ï¼Œå¦‚æœè¦ä¿è¯ M1 å…ˆäº M2 è¢«æ¶ˆè´¹ï¼Œé‚£ä¹ˆéœ€è¦ M1 åˆ°è¾¾æ¶ˆè´¹ç«¯è¢«æ¶ˆè´¹åï¼Œé€šçŸ¥ S2ï¼Œç„¶å S2 å†å°† M2 å‘é€åˆ°æ¶ˆè´¹ç«¯ã€‚</p> <p>è¿™ä¸ªæ¨¡å‹å­˜åœ¨çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœ M1 å’Œ M2 åˆ†åˆ«å‘é€åˆ°ä¸¤å° Server ä¸Šï¼Œå°±ä¸èƒ½ä¿è¯ M1 å…ˆè¾¾åˆ° MQ é›†ç¾¤ï¼Œä¹Ÿä¸èƒ½ä¿è¯ M1 è¢«å…ˆæ¶ˆè´¹ã€‚æ¢ä¸ªè§’åº¦çœ‹ï¼Œå¦‚æœ M2 å…ˆäº M1 è¾¾åˆ° MQ é›†ç¾¤ï¼Œç”šè‡³ M2 è¢«æ¶ˆè´¹åï¼ŒM1 æ‰è¾¾åˆ°æ¶ˆè´¹ç«¯ï¼Œè¿™æ—¶æ¶ˆæ¯ä¹Ÿå°±ä¹±åºäº†ï¼Œè¯´æ˜ä»¥ä¸Šæ¨¡å‹æ˜¯ä¸èƒ½ä¿è¯æ¶ˆæ¯çš„é¡ºåºçš„ã€‚</p> <div align="center"><img src="http://upload-images.jianshu.io/upload_images/3101171-5a6313fe906a678b"></div> <h4 id="ç¬¬äºŒç§æ¨¡å‹"><a href="#ç¬¬äºŒç§æ¨¡å‹" class="header-anchor">#</a> ç¬¬äºŒç§æ¨¡å‹</h4> <p>å¦‚ä½•æ‰èƒ½åœ¨ MQ é›†ç¾¤ä¿è¯æ¶ˆæ¯çš„é¡ºåºï¼Ÿä¸€ç§ç®€å•çš„æ–¹å¼å°±æ˜¯å°† M1ã€M2 å‘é€åˆ°åŒä¸€ä¸ª Server ä¸Šï¼š</p> <p>è¿™æ ·å¯ä»¥ä¿è¯ M1 å…ˆäº M2 åˆ°è¾¾ MQServerï¼ˆç”Ÿäº§è€…ç­‰å¾… M1 å‘é€æˆåŠŸåå†å‘é€ M2ï¼‰ï¼Œæ ¹æ®å…ˆè¾¾åˆ°å…ˆè¢«æ¶ˆè´¹çš„åŸåˆ™ï¼ŒM1 ä¼šå…ˆäº M2 è¢«æ¶ˆè´¹ï¼Œè¿™æ ·å°±ä¿è¯äº†æ¶ˆæ¯çš„é¡ºåºã€‚</p> <p>è¿™ä¸ªæ¨¡å‹ä¹Ÿä»…ä»…æ˜¯ç†è®ºä¸Šå¯ä»¥ä¿è¯æ¶ˆæ¯çš„é¡ºåºï¼Œåœ¨å®é™…åœºæ™¯ä¸­å¯èƒ½ä¼šé‡åˆ°ä¸‹é¢çš„é—®é¢˜ï¼š</p> <div align="center"><img src="http://upload-images.jianshu.io/upload_images/3101171-d430f5a3ec6c48ad"></div> <p>åªè¦å°†æ¶ˆæ¯ä»ä¸€å°æœåŠ¡å™¨å‘å¾€å¦ä¸€å°æœåŠ¡å™¨ï¼Œå°±ä¼šå­˜åœ¨ç½‘ç»œå»¶è¿Ÿé—®é¢˜ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¦‚æœå‘é€ M1 è€—æ—¶å¤§äºå‘é€ M2 çš„è€—æ—¶ï¼Œé‚£ä¹ˆ M2 å°±ä»å°†è¢«å…ˆæ¶ˆè´¹ï¼Œä»ç„¶ä¸èƒ½ä¿è¯æ¶ˆæ¯çš„é¡ºåºã€‚å³ä½¿ M1 å’Œ M2 åŒæ—¶åˆ°è¾¾æ¶ˆè´¹ç«¯ï¼Œç”±äºä¸æ¸…æ¥šæ¶ˆè´¹ç«¯ 1 å’Œæ¶ˆè´¹ç«¯ 2 çš„è´Ÿè½½æƒ…å†µï¼Œä»ç„¶æœ‰å¯èƒ½å‡ºç° M2 å…ˆäº M1 è¢«æ¶ˆè´¹çš„æƒ…å†µã€‚</p> <p>å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿå°† M1 å’Œ M2 å‘å¾€åŒä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œä¸”å‘é€ M1 åï¼Œéœ€è¦æ¶ˆè´¹ç«¯å“åº”æˆåŠŸåæ‰èƒ½å‘é€ M2ã€‚</p> <p>è¿™å¯èƒ½äº§ç”Ÿå¦å¤–çš„é—®é¢˜ï¼šå¦‚æœ M1 è¢«å‘é€åˆ°æ¶ˆè´¹ç«¯åï¼Œæ¶ˆè´¹ç«¯ 1 æ²¡æœ‰å“åº”ï¼Œé‚£æ˜¯ç»§ç»­å‘é€ M2 å‘¢ï¼Œè¿˜æ˜¯é‡æ–°å‘é€ M1ï¼Ÿä¸€èˆ¬ä¸ºäº†ä¿è¯æ¶ˆæ¯ä¸€å®šè¢«æ¶ˆè´¹ï¼Œè‚¯å®šä¼šé€‰æ‹©é‡å‘ M1 åˆ°å¦å¤–ä¸€ä¸ªæ¶ˆè´¹ç«¯ 2ï¼Œå°±å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p> <div align="center"><img src="http://upload-images.jianshu.io/upload_images/3101171-3c0e822d37a85e1e"></div> <p>è¿™æ ·çš„æ¨¡å‹å°±ä¸¥æ ¼ä¿è¯æ¶ˆæ¯çš„é¡ºåºï¼Œç»†å¿ƒçš„ä½ ä»ç„¶ä¼šå‘ç°é—®é¢˜ï¼Œæ¶ˆè´¹ç«¯ 1 æ²¡æœ‰å“åº” Server æ—¶æœ‰ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯ M1 ç¡®å®æ²¡æœ‰åˆ°è¾¾(æ•°æ®åœ¨ç½‘ç»œä¼ é€ä¸­ä¸¢å¤±)ï¼Œå¦å¤–ä¸€ç§æ¶ˆè´¹ç«¯å·²ç»æ¶ˆè´¹ M1 ä¸”å·²ç»å‘é€å“åº”æ¶ˆæ¯ï¼Œåªæ˜¯ MQ Server ç«¯æ²¡æœ‰æ”¶åˆ°ã€‚å¦‚æœæ˜¯ç¬¬äºŒç§æƒ…å†µï¼Œé‡å‘ M1ï¼Œå°±ä¼šé€ æˆ M1 è¢«é‡å¤æ¶ˆè´¹ã€‚ä¹Ÿå°±å¼•å…¥äº†æˆ‘ä»¬è¦è¯´çš„ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæ¶ˆæ¯é‡å¤é—®é¢˜ï¼Œè¿™ä¸ªåæ–‡ä¼šè¯¦ç»†è®²è§£ã€‚</p> <p>å›è¿‡å¤´æ¥çœ‹æ¶ˆæ¯é¡ºåºé—®é¢˜ï¼Œä¸¥æ ¼çš„é¡ºåºæ¶ˆæ¯éå¸¸å®¹æ˜“ç†è§£ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ–‡ä¸­æ‰€æè¿°çš„æ–¹å¼æ¥ç®€å•å¤„ç†ã€‚æ€»ç»“èµ·æ¥ï¼Œè¦å®ç°ä¸¥æ ¼çš„é¡ºåºæ¶ˆæ¯ï¼Œç®€å•ä¸”å¯è¡Œçš„åŠæ³•å°±æ˜¯ï¼š</p> <p><strong>ä¿è¯ç”Ÿäº§è€… - MQServer - æ¶ˆè´¹è€…æ˜¯ä¸€å¯¹ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚</strong></p> <p>è¿™æ ·çš„è®¾è®¡è™½ç„¶ç®€å•æ˜“è¡Œï¼Œä½†ä¹Ÿä¼šå­˜åœ¨ä¸€äº›å¾ˆä¸¥é‡çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p> <ol><li>å¹¶è¡Œåº¦å°±ä¼šæˆä¸ºæ¶ˆæ¯ç³»ç»Ÿçš„ç“¶é¢ˆï¼ˆååé‡ä¸å¤Ÿï¼‰</li> <li>æ›´å¤šçš„å¼‚å¸¸å¤„ç†ï¼Œæ¯”å¦‚ï¼šåªè¦æ¶ˆè´¹ç«¯å‡ºç°é—®é¢˜ï¼Œå°±ä¼šå¯¼è‡´æ•´ä¸ªå¤„ç†æµç¨‹é˜»å¡ï¼Œæˆ‘ä»¬ä¸å¾—ä¸èŠ±è´¹æ›´å¤šçš„ç²¾åŠ›æ¥è§£å†³é˜»å¡çš„é—®é¢˜ã€‚</li></ol> <p>RocketMQ çš„è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡åˆç†çš„è®¾è®¡æˆ–è€…å°†é—®é¢˜åˆ†è§£æ¥è§„é¿ã€‚å¦‚æœç¡¬è¦æŠŠæ—¶é—´èŠ±åœ¨è§£å†³é—®é¢˜æœ¬èº«ï¼Œå®é™…ä¸Šä¸ä»…æ•ˆç‡ä½ä¸‹ï¼Œè€Œä¸”ä¹Ÿæ˜¯ä¸€ç§æµªè´¹ã€‚ä»è¿™ä¸ªè§’åº¦æ¥çœ‹æ¶ˆæ¯çš„é¡ºåºé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸¤ä¸ªç»“è®ºï¼š</p> <ol><li>ä¸å…³æ³¨ä¹±åºçš„åº”ç”¨å®é™…å¤§é‡å­˜åœ¨</li> <li>é˜Ÿåˆ—æ— åºå¹¶ä¸æ„å‘³ç€æ¶ˆæ¯æ— åº</li></ol> <p>æœ€åæˆ‘ä»¬ä»æºç è§’åº¦åˆ†æ RocketMQ æ€ä¹ˆå®ç°å‘é€é¡ºåºæ¶ˆæ¯ã€‚</p> <p>RocketMQ é€šè¿‡è½®è¯¢æ‰€æœ‰é˜Ÿåˆ—çš„æ–¹å¼æ¥ç¡®å®šæ¶ˆæ¯è¢«å‘é€åˆ°å“ªä¸€ä¸ªé˜Ÿåˆ—ï¼ˆè´Ÿè½½å‡è¡¡ç­–ç•¥ï¼‰ã€‚æ¯”å¦‚ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œè®¢å•å·ç›¸åŒçš„æ¶ˆæ¯ä¼šè¢«å…ˆåå‘é€åˆ°åŒä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// RocketMQ é€šè¿‡ MessageQueueSelector ä¸­å®ç°çš„ç®—æ³•æ¥ç¡®å®šæ¶ˆæ¯å‘é€åˆ°å“ªä¸€ä¸ªé˜Ÿåˆ—ä¸Š</span>
<span class="token comment">// RocketMQ é»˜è®¤æä¾›äº†ä¸¤ç§ MessageQueueSelector å®ç°ï¼šéšæœº/Hash</span>
<span class="token comment">// å½“ç„¶ä½ å¯ä»¥æ ¹æ®ä¸šåŠ¡å®ç°è‡ªå·±çš„ MessageQueueSelector æ¥å†³å®šæ¶ˆæ¯æŒ‰ç…§ä½•ç§ç­–ç•¥å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­</span>
<span class="token class-name">SendResult</span> sendResult <span class="token operator">=</span> producer<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MessageQueueSelector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">MessageQueue</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MessageQueue</span><span class="token punctuation">&gt;</span></span> mqs<span class="token punctuation">,</span> <span class="token class-name">Message</span> msg<span class="token punctuation">,</span> <span class="token class-name">Object</span> arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> arg<span class="token punctuation">;</span>
        <span class="token keyword">int</span> index <span class="token operator">=</span> id <span class="token operator">%</span> mqs<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mqs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨è·å–åˆ°è·¯ç”±ä¿¡æ¯ä»¥åï¼Œä¼šæ ¹æ® MessageQueueSelector å®ç°çš„ç®—æ³•æ¥é€‰æ‹©ä¸€ä¸ªé˜Ÿåˆ—ï¼ŒåŒä¸€ä¸ª OrderId è·å–åˆ°çš„è‚¯å®šæ˜¯åŒä¸€ä¸ªé˜Ÿåˆ—ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">SendResult</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
    <span class="token comment">// è·å–topicè·¯ç”±ä¿¡æ¯</span>
    <span class="token class-name">TopicPublishInfo</span> topicPublishInfo <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">tryToFindTopicPublishInfo</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">getTopic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>topicPublishInfo <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> topicPublishInfo<span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">MessageQueue</span> mq <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token comment">// æ ¹æ®æˆ‘ä»¬çš„ç®—æ³•ï¼Œé€‰æ‹©ä¸€ä¸ªå‘é€é˜Ÿåˆ—</span>
        <span class="token comment">// è¿™é‡Œçš„arg = orderId</span>
        mq <span class="token operator">=</span> selector<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>topicPublishInfo<span class="token punctuation">.</span><span class="token function">getMessageQueueList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> msg<span class="token punctuation">,</span> arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mq <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sendKernelImpl</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> mq<span class="token punctuation">,</span> communicationMode<span class="token punctuation">,</span> sendCallback<span class="token punctuation">,</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="æ¶ˆæ¯é‡å¤"><a href="#æ¶ˆæ¯é‡å¤" class="header-anchor">#</a> æ¶ˆæ¯é‡å¤</h3> <p>é€ æˆæ¶ˆæ¯é‡å¤çš„æ ¹æœ¬åŸå› æ˜¯ï¼šç½‘ç»œä¸å¯è¾¾ã€‚åªè¦é€šè¿‡ç½‘ç»œäº¤æ¢æ•°æ®ï¼Œå°±æ— æ³•é¿å…è¿™ä¸ªé—®é¢˜ã€‚æ‰€ä»¥è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•å°±æ˜¯ç»•è¿‡è¿™ä¸ªé—®é¢˜ã€‚é‚£ä¹ˆé—®é¢˜å°±å˜æˆäº†ï¼šå¦‚æœæ¶ˆè´¹ç«¯æ”¶åˆ°ä¸¤æ¡ä¸€æ ·çš„æ¶ˆæ¯ï¼Œåº”è¯¥æ€æ ·å¤„ç†ï¼Ÿ</p> <ol><li>æ¶ˆè´¹ç«¯å¤„ç†æ¶ˆæ¯çš„ä¸šåŠ¡é€»è¾‘ä¿æŒå¹‚ç­‰æ€§ã€‚</li> <li>ä¿è¯æ¯æ¡æ¶ˆæ¯éƒ½æœ‰å”¯ä¸€ç¼–å·ä¸”ä¿è¯æ¶ˆæ¯å¤„ç†æˆåŠŸä¸å»é‡è¡¨çš„æ—¥å¿—åŒæ—¶å‡ºç°ã€‚</li></ol> <p>ç¬¬ 1 æ¡å¾ˆå¥½ç†è§£ï¼Œåªè¦ä¿æŒå¹‚ç­‰æ€§ï¼Œä¸ç®¡æ¥å¤šå°‘æ¡é‡å¤æ¶ˆæ¯ï¼Œæœ€åå¤„ç†çš„ç»“æœéƒ½ä¸€æ ·ã€‚</p> <p>ç¬¬ 2 æ¡åŸç†å°±æ˜¯åˆ©ç”¨ä¸€å¼ æ—¥å¿—è¡¨æ¥è®°å½•å·²ç»å¤„ç†æˆåŠŸçš„æ¶ˆæ¯çš„ IDï¼Œå¦‚æœæ–°åˆ°çš„æ¶ˆæ¯ ID å·²ç»åœ¨æ—¥å¿—è¡¨ä¸­ï¼Œé‚£ä¹ˆå°±ä¸å†å¤„ç†è¿™æ¡æ¶ˆæ¯ã€‚</p> <p>ç¬¬ 1 æ¡è§£å†³æ–¹æ¡ˆï¼Œå¾ˆæ˜æ˜¾åº”è¯¥åœ¨æ¶ˆè´¹ç«¯å®ç°ï¼Œä¸å±äºæ¶ˆæ¯ç³»ç»Ÿè¦å®ç°çš„åŠŸèƒ½ã€‚</p> <p>ç¬¬ 2 æ¡å¯ä»¥æ¶ˆæ¯ç³»ç»Ÿå®ç°ï¼Œä¹Ÿå¯ä»¥ä¸šåŠ¡ç«¯å®ç°ã€‚æ­£å¸¸æƒ…å†µä¸‹å‡ºç°é‡å¤æ¶ˆæ¯çš„æ¦‚ç‡å…¶å®å¾ˆå°ï¼Œå¦‚æœç”±æ¶ˆæ¯ç³»ç»Ÿæ¥å®ç°çš„è¯ï¼Œè‚¯å®šä¼šå¯¹æ¶ˆæ¯ç³»ç»Ÿçš„ååé‡å’Œé«˜å¯ç”¨æœ‰å½±å“ï¼Œæ‰€ä»¥æœ€å¥½è¿˜æ˜¯ç”±ä¸šåŠ¡ç«¯è‡ªå·±å¤„ç†æ¶ˆæ¯é‡å¤çš„é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯ RocketMQ ä¸è§£å†³æ¶ˆæ¯é‡å¤çš„é—®é¢˜çš„åŸå› ã€‚</p> <p><strong>RocketMQ ä¸ä¿è¯æ¶ˆæ¯ä¸é‡å¤ï¼Œå¦‚æœä½ çš„ä¸šåŠ¡éœ€è¦ä¿è¯ä¸¥æ ¼çš„ä¸é‡å¤æ¶ˆæ¯ï¼Œéœ€è¦ä½ è‡ªå·±åœ¨ä¸šåŠ¡ç«¯å»é‡ã€‚</strong></p> <h3 id="äº‹åŠ¡æ¶ˆæ¯"><a href="#äº‹åŠ¡æ¶ˆæ¯" class="header-anchor">#</a> äº‹åŠ¡æ¶ˆæ¯</h3> <p>RocketMQ é™¤äº†æ”¯æŒæ™®é€šæ¶ˆæ¯ï¼Œé¡ºåºæ¶ˆæ¯ï¼Œå¦å¤–è¿˜æ”¯æŒäº‹åŠ¡æ¶ˆæ¯ã€‚</p> <p>å‡è®¾è¿™æ ·çš„åœºæ™¯ï¼š</p> <p><img src="https://upload-images.jianshu.io/upload_images/3101171-253d8bd65736694f.png" alt="img"></p> <p>å›¾ä¸­æ‰§è¡Œæœ¬åœ°äº‹åŠ¡ï¼ˆBob è´¦æˆ·æ‰£æ¬¾ï¼‰å’Œå‘é€å¼‚æ­¥æ¶ˆæ¯åº”è¯¥ä¿è¯åŒæ—¶æˆåŠŸæˆ–è€…åŒæ—¶å¤±è´¥ï¼Œä¹Ÿå°±æ˜¯æ‰£æ¬¾æˆåŠŸäº†ï¼Œå‘é€æ¶ˆæ¯ä¸€å®šè¦æˆåŠŸï¼Œå¦‚æœæ‰£æ¬¾å¤±è´¥äº†ï¼Œå°±ä¸èƒ½å†å‘é€æ¶ˆæ¯ã€‚é‚£é—®é¢˜æ˜¯ï¼šæˆ‘ä»¬æ˜¯å…ˆæ‰£æ¬¾è¿˜æ˜¯å…ˆå‘é€æ¶ˆæ¯å‘¢ï¼Ÿ</p> <p><img src="http://upload-images.jianshu.io/upload_images/3101171-088dc074c4ecd192" alt="img"></p> <p>RocketMQ åˆ†å¸ƒå¼äº‹åŠ¡æ­¥éª¤ï¼š</p> <p>å‘é€ Prepared æ¶ˆæ¯ 2222222222222222222ï¼Œå¹¶æ‹¿åˆ°æ¥å—æ¶ˆæ¯çš„åœ°å€ã€‚
æ‰§è¡Œæœ¬åœ°äº‹åŠ¡
é€šè¿‡ç¬¬ 1 æ­¥éª¤æ‹¿åˆ°çš„åœ°å€å»è®¿é—®æ¶ˆæ¯ï¼Œå¹¶ä¿®æ”¹æ¶ˆæ¯çŠ¶æ€ã€‚</p> <h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="header-anchor">#</a> å‚è€ƒèµ„æ–™</h2> <ul><li><a href="http://rocketmq.apache.org/docs/quick-start/" target="_blank" rel="noopener noreferrer">RocketMQ å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.jianshu.com/p/453c6e7ff81c" target="_blank" rel="noopener noreferrer">åˆ†å¸ƒå¼å¼€æ”¾æ¶ˆæ¯ç³»ç»Ÿ(RocketMQ)çš„åŸç†ä¸å®è·µ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <div class="page-slot page-slot-bottom">
  <div class="wwads-cn wwads-horizontal pageB" data-id="136" style="width:100%;max-height:80px;min-height:auto;"></div>
  <style>
    .pageB img{width:80px!important;}
    .wwads-horizontal .wwads-text, .wwads-content .wwads-text{line-height:1;}
  </style>
  </div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/java-tutorial/edit/master/docs/14.ä¸­é—´ä»¶/01.MQ/03.RocketMQ.md" target="_blank" rel="noopener noreferrer">ğŸ“ å¸®åŠ©æ”¹å–„æ­¤é¡µé¢ï¼</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/java-tutorial/tags/?tag=Java" title="æ ‡ç­¾">#Java</a><a href="/java-tutorial/tags/?tag=%E4%B8%AD%E9%97%B4%E4%BB%B6" title="æ ‡ç­¾">#ä¸­é—´ä»¶</a><a href="/java-tutorial/tags/?tag=MQ" title="æ ‡ç­¾">#MQ</a><a href="/java-tutorial/tags/?tag=RocketMQ" title="æ ‡ç­¾">#RocketMQ</a></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2022/07/08, 19:00:16</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/java-tutorial/pages/055069/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">æ¶ˆæ¯é˜Ÿåˆ—åŸºæœ¬åŸç†</div></a> <a href="/java-tutorial/pages/3f7c49/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">ActiveMQ å¿«é€Ÿå…¥é—¨</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/java-tutorial/pages/055069/" class="prev">æ¶ˆæ¯é˜Ÿåˆ—åŸºæœ¬åŸç†</a></span> <span class="next"><a href="/java-tutorial/pages/3f7c49/">ActiveMQ å¿«é€Ÿå…¥é—¨</a>â†’
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/java-tutorial/archives/" class="iconfont icon-bi">æœ€è¿‘æ›´æ–°</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/java-tutorial/pages/3cbcff/"><div>
            Java ä¸­é—´ä»¶
            <!----></div></a> <span class="date">04-09</span></dt></dl><dl><dd>02</dd> <dt><a href="/java-tutorial/pages/86288e/"><div>
            Tomcat æ•™ç¨‹
            <!----></div></a> <span class="date">02-18</span></dt></dl><dl><dd>03</dd> <dt><a href="/java-tutorial/pages/ca58e7/"><div>
            JavaEE
            <!----></div></a> <span class="date">02-18</span></dt></dl> <dl><dd></dd> <dt><a href="/java-tutorial/archives/" class="more">æ›´å¤šæ–‡ç« &gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:forbreak@163.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/dunwu" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2019-2022
    <span>é’æ‚Ÿï¼ˆdunwuï¼‰ | CC-BY-SA-4.0</span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">Ã—</span> <div>
    <div class="wwads-cn wwads-vertical windowRB" data-id="136" style="max-width:160px;
    min-width: auto;min-height:auto;"></div>
    <style>
      .windowRB{ padding: 0;}
      .windowRB .wwads-img{margin-top: 10px;}
      .windowRB .wwads-content{margin: 0 10px 10px 10px;}
      .custom-html-window-rb .close-but{
        display: none;
      }
    </style>
  </div></div></div></div><div class="global-ui"></div></div>
    <script src="/java-tutorial/assets/js/app.1905b9e7.js" defer></script><script src="/java-tutorial/assets/js/2.fd3e179e.js" defer></script><script src="/java-tutorial/assets/js/71.cfe6e344.js" defer></script>
  </body>
</html>
